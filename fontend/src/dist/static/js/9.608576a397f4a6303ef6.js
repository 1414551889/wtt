webpackJsonp([9],{"6JS4":function(e,t){},AwxK:function(e,t,a){"use strict";function r(e){a("6JS4")}Object.defineProperty(t,"__esModule",{value:!0});var n,o=a("lC5x"),i=a.n(o),s=a("J0Oq"),c=a.n(s),l=a("3cXf"),d=a.n(l),u=a("a3Yh"),m=a.n(u),f=a("0jG4"),g=a("0xDb"),p=a("aiqZ"),h=a("L7Pj"),v=a.n(h),x={components:{quillEditor:p.quillEditor},name:"manage_add",data:function(){var e;return e={vertical:"",data1:[],options3:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}},editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}]]},placeholder:"请填写完成情况！",theme:"snow"},centerId:"1",daterange:"",imgName:"",single:!1,defaultList:[]},m()(e,"imgName",""),m()(e,"visible",!1),m()(e,"pageSize",10),m()(e,"pageIndex",1),m()(e,"uploadList",[]),m()(e,"model1",[{id:2,roleName:"普通员工"},{id:3,roleName:"发布管理员"},{id:4,roleName:"项目管理员"},{id:5,roleName:"新鲜事管理员"},{id:6,roleName:"老板5",creationTime:"2018-07-06 20:24:09"},{id:8,roleName:"老板5"},{id:9,roleName:"老板6"},{id:10,roleName:"老板7"},{id:11,roleName:"老板8"},{id:12,roleName:"老板9"}]),m()(e,"formData",{name:"",account:"",roleId:"",organizationId:""}),m()(e,"formRule",{name:{required:!0,message:"请填写账号！",trigger:"blur"},account:{required:!0,message:"请填写账号！",trigger:"blur"},organizationId:{required:!0,message:"请填写所属Id！",trigger:"change"},roleId:{required:!0,message:"请选择用户角色！",trigger:"blur"}}),e},computed:{user:function(){return this.$store.state.user},editor:function(){return this.$refs.myTextEditor.quillEditor}},watch:{"formData.roleId":"setroleId"},created:function(){this.$store.state.manageList;this.manage(),this.initDat(1)},mounted:function(){},methods:(n={a:function(e){var t=this.$refs.tree4.getSelectedNodes();d()(t);this.formData.organizationId=t[0].id,console.log(this.formData.organizationId)},manage:function(){var e=this;return c()(i.a.mark(function t(){var a,r,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.userManage.findAll();case 3:for(a=t.sent,e.data1=a,e.data1.expand=!0,r=0;r<a.children.length;r++)if(e.data1.children[r].expand=!0,a.children[r].children)for(n=0;n<a.children[r].children.length;n++)e.data1.children[r].children[n].expand=!0;e.data1=[e.data1],t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e.$Message.error(t.t0.message);case 13:case"end":return t.stop()}},t,e,[[0,10]])}))()},addUserPermission:function(){var e=this;return c()(i.a.mark(function t(){var a,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.formData,t.next=4,f.a.userManage.addUserPermission(a);case 4:r=t.sent,e.$router.go(-1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.$Message.error(t.t0.message);case 11:case"end":return t.stop()}},t,e,[[0,8]])}))()},initData:function(){this.user&&(this.formData.centerId=this.user.centerId)},submit:function(){var e=this;console.log(formData),this.$refs.form.validate(function(){var t=c()(i.a.mark(function t(a){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=8;break}return r=formData,t.next=4,f.a.userManage.addUserPermissions(r);case 4:e.$Message.success("保存成功！"),e.$router.go(-1),t.next=9;break;case 8:e.$Message.error("验证失败");case 9:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())}},m()(n,"initData",function(e){var t=this;return c()(i.a.mark(function a(){var r,n,o;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=""!=e?e:t.pageIndex,r=g.a.localStorage.getToken(),a.prev=2,n={jwtToken:r,pageIndex:t.pageIndex,pageSize:t.pageSize},a.next=6,f.a.userManage.queryRoleListing(n);case 6:return o=a.sent,t.total=o.reultAllCount,t.model=o.list,a.abrupt("return",o.data);case 12:a.prev=12,a.t0=a.catch(2),t.$Message.error(a.t0.message);case 15:case"end":return a.stop()}},a,t,[[2,12]])}))()}),m()(n,"initDat",function(){var e=this;return c()(i.a.mark(function t(){var a,r,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=g.a.localStorage.getToken(),t.prev=1,r={pageIndex:e.pageIndex,pageSize:e.pageSize,jwtToken:a},t.next=5,f.a.userManage.queryRoleListing(r);case 5:n=t.sent,e.total=n.reultAllCount,e.model=n.list,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.$Message.error(t.t0.message);case 13:case"end":return t.stop()}},t,e,[[1,10]])}))()}),m()(n,"handleChange",function(e){this.formData.selecttime=e?new Date(e):""}),m()(n,"dateChangea",function(e){this.formData.timeLimit=e?new Date(e):""}),m()(n,"bbb",function(){var e=v()(this).children("#getIndex").hide();console.log(e)}),n)},b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")]),e._v(" "),a("Button",{attrs:{type:"primary",icon:"folder"},on:{click:e.addUserPermission}},[e._v("保存")])],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"12",offset:"6"}},[a("Form",{ref:"form",attrs:{model:e.formData,rules:e.formRule,"label-width":100}},[a("FormItem",{attrs:{label:"姓名：",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入用户姓名"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"用户账号：",prop:"account"}},[a("Input",{attrs:{placeholder:"请输入手机号(账号)"},model:{value:e.formData.account,callback:function(t){e.$set(e.formData,"account",t)},expression:"formData.account"}})],1),e._v(" "),a("FormItem",{attrs:{label:"组织结构：",prop:"organizationId"}},[a("div",{staticStyle:{height:"366px","overflow-y":"scroll"}},[[a("Tree",{ref:"tree4",attrs:{data:e.data1},on:{"on-select-change":function(t){e.a()}}})]],2)]),e._v(" "),a("FormItem",{attrs:{label:"角色：",prop:"roleId"}},[[a("Select",{staticStyle:{width:"200px"},model:{value:e.formData.roleId,callback:function(t){e.$set(e.formData,"roleId",t)},expression:"formData.roleId"}},e._l(e.model1,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.roleName))])}))]],2)],1)],1)],1)],1)},I=[],D={render:b,staticRenderFns:I},k=D,w=a("C7Lr"),$=r,_=w(x,k,!1,$,"data-v-5c3dddef",null);t.default=_.exports}});