webpackJsonp([1],{"+sqs":function(t,e,a){"use strict";function r(t){a("0AHP")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("lC5x"),o=a.n(n),s=a("J0Oq"),i=a.n(s),c=a("0jG4"),l={name:"summary_view",data:function(){return{panelId:"1",title:"",halfWeekList:[],loading:!0}},created:function(){this.getContentByHalfBill()},watch:{halfWeekList:"openDefaultPanel"},methods:{getContentByHalfBill:function(){var t=this;return i()(o.a.mark(function e(){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.query.id,e.prev=1,t.loading=!0,e.next=5,c.a.summary.getContentByHalfBill({billId:a});case 5:r=e.sent,t.title=r.title,t.halfWeekList=r.data.list,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t.$Message.error("获取数据失败！");case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[1,10,14,17]])}))()},openDefaultPanel:function(){0!==this.halfWeekList.length&&this.$nextTick(function(){this.panelId=String(this.halfWeekList[0].id)})}}},u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")])],1),t._v(" "),a("h3",{staticClass:"mb10"},[t._v(t._s(t.title))]),t._v(" "),t.loading?a("div",{staticClass:"loading"},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),a("div",[t._v("Loading")])],1)],1):0===t.halfWeekList.length?a("div",[t._v("\n    暂无数据\n  ")]):a("Collapse",{attrs:{accordion:""},model:{value:t.panelId,callback:function(e){t.panelId=e},expression:"panelId"}},t._l(t.halfWeekList,function(e,r){return a("Panel",{key:e.id,attrs:{name:String(e.id)}},[a("p",{staticClass:"ellipsis",staticStyle:{width:"100%",float:"right","margin-left":"-5px","padding-left":"8px"}},[t._v("\n        "+t._s(e.centerName)+": "+t._s(e.projectName)+"\n      ")]),t._v(" "),a("p",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[a("b",{staticClass:"label"},[t._v("半周报名称：")]),t._v(t._s(e.projectName)+"\n        "),a("b",{staticClass:"label"},[t._v("半周报内容：")]),t._v("\n        "+t._s(e.workContent)+"\n        "),a("b",{staticClass:"label"},[t._v("子项目：")]),t._v("\n        "+t._s(e.subProject)+"\n      ")])])}))],1)},d=[],p={render:u,staticRenderFns:d},m=p,f=a("C7Lr"),v=r,h=f(l,m,!1,v,"data-v-7644cc1c",null);e.default=h.exports},"0AHP":function(t,e){},"0ezj":function(t,e){},"1GOY":function(t,e,a){"use strict";function r(t){a("cAAr")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("a3Yh"),o=a.n(n),s=a("lC5x"),i=a.n(s),c=a("J0Oq"),l=a.n(c),u=a("0xDb"),d=a("0jG4"),p=(a("2sCs"),a("DMPO")),m={components:{swiper:p.swiper,swiperSlide:p.swiperSlide},name:"halfweek",data:function(){var t,e=this;return t={model1:"",delModal:!1,pubModal:!1,contentId:"",loading:!1,imglist:[],swiperOption:{autoplay:3e3,loop:!0,pagination:".swiper-pagination",paginationClickable:!0},keyword:"",modalPre:!1},o()(t,"loading",!1),o()(t,"columns",[{title:"日报名称",key:"projectName",width:120,align:"center"},{title:"工作内容",key:"dailyContent",align:"center"},{title:"发布时间",key:"publishTime",width:200,align:"center"},{title:"状态",key:"isPublish",width:100,align:"center",render:function(t,e){var a=e.row.isPublish,r="";switch(a){case 0:return r="草稿",t("span","草稿");case 1:return t("span","发布");case 2:case 3:return r="草稿",t("span","草稿");default:r=""}return r}},{title:"操作",align:"center",width:260,render:function(t,a){var r=u.a.localStorage.getUser(),n=t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.modalPre=!0,e.viewData.projectName=a.row.projectName,e.viewData.overState=a.row.overState,e.viewData.publishTime=a.row.publishTime,e.viewData.isPublish=a.row.isPublish,l()(i.a.mark(function t(){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.summary.getContentsByIdNew({contentId:a.row.id});case 3:r=t.sent,e.$Message.success("预览成功"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.$Message.error(t.t0.message);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))}}},"查看"),o=t("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$router.push({name:"halfmodify",query:{id:a.row.contentId}})}}},"修改"),s=t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.delModal=!0,e.contentId=a.row.contentId}}},"删除"),c=t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.pubModal=!0,e.contentId=a.row.contentId}}},"发布");return 0===a.row.isPublish?t("div",[n,o,s,c]):1===r.role?t("div",[n,o,s,c]):2===r.role?t("div",[n,c,s,o]):void 0}}]),o()(t,"viewData",{isPublish:"",publishTime:"",overState:"",projectName:""}),o()(t,"tableData",[]),o()(t,"total",0),o()(t,"centerId",""),o()(t,"pageIndex",1),o()(t,"pageSize",10),t},created:function(){this.getHalfWeekReportBill()},computed:{user:function(){return this.$store.state.user}},mounted:function(){var t=u.a.localStorage.getUser();this.centerId=t.center},methods:o()({add:function(){this.$router.push({name:"halfadd"})},search:function(){this.getHalfWeekReportBill(1)},getHalfWeekReportBill:function(t){var e=this;return l()(i.a.mark(function a(){var r,n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t&&(e.pageIndex=t),a.prev=1,r={centerId:e.model1,daterange:e.daterange,pageIndex:e.pageIndex,pageSize:e.pageSize},e.loading=!0,a.next=6,d.a.summary.getSemiweeklyContentNew(r);case 6:n=a.sent,console.log(n),e.tableData=n.list,e.total=n.reultAllCount,a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),e.$Message.error(a.t0.message);case 15:return a.prev=15,e.loading=!1,a.finish(15);case 18:case"end":return a.stop()}},a,e,[[1,12,15,18]])}))()},dateChange:function(t){this.daterange=t},deletContentsManyNew:function(){var t=this;return l()(i.a.mark(function e(){var a,r,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.a.localStorage.getToken(),e.prev=1,r={contentId:r.row.id,jwtToken:a},e.next=5,d.a.summary.deletContentsManyNew(r);case 5:n=e.sent,t.$message.success("删除成功！"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.$message.error("删除失败！");case 12:case"end":return e.stop()}},e,t,[[1,9]])}))()},delOk:function(){var t=this;return l()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.summary.deletContentsManyNew({contentId:t.contentId});case 3:a=e.sent,t.$Message.success("删除成功！"),t.getDailyContentNew(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.$Message.error(e.t0.message);case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()},pubOk:function(){var t=this;return l()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.summary.publishContentsNew({contentId:t.contentId});case 3:a=e.sent,t.$Message.success("发布成功！"),t.getDailyContentNew(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.$Message.error(e.t0.message);case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()}},"dateChange",function(t){effectiveTime?this.tableData.daterange=new Date(t):this.tableData.daterange=""})},f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[t.$store.state.user&&1===t.$store.state.user.role?a("Button",{attrs:{type:"primary",icon:"android-add"},on:{click:t.add}},[t._v("新增")]):t._e(),t._v(" "),t.$store.state.user&&1===t.$store.state.user.role?a("span",{staticStyle:{"margin-left":"36px"}}):t._e(),t._v(" "),[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择中心"},model:{value:t.model1,callback:function(e){t.model1=e},expression:"model1"}},t._l(t.$store.state.centers,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],t._v(" "),a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"选择日期"},on:{"on-change":t.dateChange},model:{value:t.tableData.daterange,callback:function(e){t.$set(t.tableData,"daterange",e)},expression:"tableData.daterange"}}),t._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.search}},[t._v("查询")])],2),t._v(" "),a("Table",{ref:"selection",attrs:{border:"",columns:t.columns,data:t.tableData,loading:t.loading}}),t._v(" "),a("appPage",{attrs:{total:t.total,"show-elevator":"",pageIndex:t.pageIndex,pageSize:t.pageSize},on:{pageChange:t.getHalfWeekReportBill}}),t._v(" "),a("Modal",{attrs:{width:"350"},on:{"on-ok":t.delOk},model:{value:t.delModal,callback:function(e){t.delModal=e},expression:"delModal"}},[a("p",{staticStyle:{"text-align":"center","padding-top":"20px","font-size":"15px"}},[t._v("您确定要删除所选的半周报信息吗？")])]),t._v(" "),a("Modal",{attrs:{width:"350"},on:{"on-ok":t.pubOk},model:{value:t.pubModal,callback:function(e){t.pubModal=e},expression:"pubModal"}},[a("p",{staticStyle:{"text-align":"center","padding-top":"20px","font-size":"15px"}},[t._v("您确定要发布所选的半周报信息吗？")])]),t._v(" "),a("Modal",{attrs:{title:"预览",width:"296"},model:{value:t.modalPre,callback:function(e){t.modalPre=e},expression:"modalPre"}},[a("Form",{ref:"form",staticStyle:{height:"366px","overflow-y":"scroll"},attrs:{"label-width":100}},[a("div",{staticStyle:{"border-bottom":"1px solid #eee",position:"relative",width:"100%",margin:"0 auto"}},[a("div",{staticClass:"sidebar"}),t._v(" "),a("div",{staticClass:"sidebarright"},[a("div",[t._v("半周报")])]),t._v(" "),a("div",{staticStyle:{padding:"0 12px",width:"100%","border-bottom":"1px solid #eee","line-height":"26px"}},[a("p",{staticStyle:{"font-size":"16px","line-height":"26px"}},[t._v("\n\t\t\t\t\t          "+t._s(t.viewData.projectName)+"\n\t\t\t\t\t        ")]),t._v(" "),a("p",{staticStyle:{color:"#999","line-height":"26px","font-size":"9px"}},[t._v(t._s(t.viewData.publishTime))])]),t._v(" "),a("div",{staticStyle:{width:"100%","margin-top":"10px",color:"#666666","line-height":"22px",overflow:"hidden",padding:"0 12px",height:"96px",background:"#ECF6FF"}},[[a("swiper",{attrs:{options:t.swiperOption}},[t._l(t.viewData.overState.images,function(e){return a("swiper-slide",{key:e.id},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.src}})])}),t._v(" "),a("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)]],2)]),t._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("div",{staticStyle:{width:"100%"}},t._l(t.viewData.overState,function(e){return a("div",{staticStyle:{display:"inline-block"}},[a("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",height:"22px","line-height":"22px"}},[t._v(t._s(e.subtitle))]),t._v(" "),t._l(e.subcontent,function(e,r){return a("div",{staticStyle:{width:"100%"}},[t._v(t._s(r)+t._s(e)),a("br")])}),t._v(" "),a("br")],2)}))])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},v=[],h={render:f,staticRenderFns:v},g=h,b=a("C7Lr"),x=r,y=b(m,g,!1,x,null,null);e.default=y.exports},EWHP:function(t,e,a){"use strict";function r(t){a("Lefb")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("3cXf"),o=a.n(n),s=a("lC5x"),i=a.n(s),c=a("J0Oq"),l=a.n(c),u=a("0jG4"),d=a("0xDb"),p=a("2sCs"),m=a.n(p),f={name:"summary_edit",data:function(){return{title:"",panelId:"",halfWeekList:[],loading:!1,token:null,billId:null}},created:function(){this.getContentByHalfBill(),this.token=d.a.localStorage.getToken(),this.billId=this.$route.query.id},watch:{halfWeekList:"openDefaultPanel"},methods:{getContentByHalfBill:function(){var t=this;return l()(i.a.mark(function e(){var a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.query.id,e.prev=1,t.loading=!0,e.next=5,u.a.summary.getContentByHalfBill({billId:a});case 5:r=e.sent,console.log(r),t.halfWeekList=r.data.list,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.$Message.error("获取数据失败！");case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}},e,t,[[1,10,13,16]])}))()},add:function(){this.$router.push({name:"summaryAdd",query:this.$route.query})},modify:function(t){this.$router.push({name:"summaryModify",query:{id:t}})},publishHalfBill:function(){var t=this;return l()(i.a.mark(function e(){var a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.query.id,e.prev=1,console.log(a),e.next=5,u.a.summary.publishHalfBill({id:a});case 5:r=e.sent,t.$Message.success("发布成功！"),t.$router.go(-1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t.$Message.error("操作失败!");case 14:case"end":return e.stop()}},e,t,[[1,10]])}))()},del:function(t){var e=this;return l()(i.a.mark(function a(){var r,n,s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=new Array,r.push(t),n=o()(r),s=d.a.localStorage.getToken(),console.log(n),m.a.post("/report/api/deleteHalfWeekContent",n,{headers:{"Content-Type":"application/json;charset=UTF-8",jwtToken:s}}).then(function(a){e.$Message.success("删除成功！"),console.log(t),e.halfWeekList=e.halfWeekList.filter(function(e){return e.id!==t})});case 6:case"end":return a.stop()}},a,e)}))()},openDefaultPanel:function(){0!==this.halfWeekList.length&&this.$nextTick(function(){this.panelId=String(this.halfWeekList[0].id)})},downloadModel:function(){console.log("下载文件"),window.location.href="/report/api/exportHalfBatchResult"},uploadSuccess:function(t,e){0===t.data.code?this.$Message.success("导入成功"):this.$Message.error("导入失败")}}},v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),t.$store.state.user&&1===t.$store.state.user.role?a("Button",{attrs:{type:"primary",icon:"android-add"},on:{click:t.add}},[t._v("新增")]):t._e(),t._v(" "),t.$store.state.user&&2===t.$store.state.user.role?a("Button",{attrs:{type:"success",icon:"android-cloud-done"},on:{click:t.publishBill}},[t._v("发布")]):t._e(),t._v(" "),a("div",{staticClass:"pull-right"},[a("Button",{attrs:{type:"info",icon:"android-download"},on:{click:t.downloadModel}},[t._v("下载")]),t._v(" "),a("Upload",{attrs:{action:"/report/api/imporHalfBatchRecharge",headers:{jwtToken:t.token},data:{billId:t.billId},name:"file",accept:"application/vnd.ms-excel"},on:{"on-succcess":t.uploadSuccess}},[a("Button",{staticClass:"upload",attrs:{type:"info",icon:"ios-cloud-upload-outline"},on:{"on-success":t.uploadSuccess}},[t._v("导出")])],1)],1)],1),t._v(" "),a("h3",{staticClass:"mb10"},[t._v(t._s(t.title))]),t._v(" "),t.loading?a("div",{staticClass:"loading"},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),a("div",[t._v("Loading")])],1)],1):0===t.halfWeekList.length?a("div",[t._v("\n    暂无数据\n  ")]):a("Collapse",{attrs:{accordion:""},model:{value:t.panelId,callback:function(e){t.panelId=e},expression:"panelId"}},t._l(t.halfWeekList,function(e,r){return a("Panel",{key:e.id,attrs:{name:String(e.id)}},[a("p",{staticClass:"ellipsis",staticStyle:{width:"100%",float:"right","margin-left":"-5px","padding-left":"8px","padding-right":"130px"}},[t._v("\n        "+t._s(e.centerName)+": "+t._s(e.projectName)+"\n      ")]),t._v(" "),t.$store.state.user&&1===t.$store.state.user.role?a("ButtonGroup",{staticClass:"modify",attrs:{size:"small"}},[a("Button",{attrs:{type:"warning",icon:"edit"},on:{click:function(a){a.stopPropagation(),t.modify(e.id)}}},[t._v("修改")]),t._v(" "),a("Button",{attrs:{type:"error",icon:"ios-trash"},on:{click:function(a){a.stopPropagation(),t.del(e.id)}}},[t._v("删除")])],1):t._e(),t._v(" "),a("p",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[a("b",{staticClass:"label"},[t._v("半周报名称：")]),t._v(t._s(e.projectName)+"\n        "),a("b",{staticClass:"label"},[t._v("半周报内容：")]),t._v(t._s(e.workContent)+"\n        "),a("b",{staticClass:"label"},[t._v("子项目名称：")]),t._v(t._s(e.subProject)+"\n      ")])],1)}))],1)},h=[],g={render:v,staticRenderFns:h},b=g,x=a("C7Lr"),y=r,_=x(f,b,!1,y,"data-v-51b46981",null);e.default=_.exports},L7ct:function(t,e){},Lefb:function(t,e){},MmyW:function(t,e){},OFfA:function(t,e){},WJ1r:function(t,e,a){"use strict";function r(t){a("L7ct")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("lC5x"),o=a.n(n),s=a("J0Oq"),i=a.n(s),c=a("0jG4"),l=a("0xDb"),u=a("aiqZ"),d=(a("L7Pj"),{name:"halfadd",data:function(){return{a:"",components:{quillEditor:u.quillEditor},formData:{selecttime:"",projectName:"",overState:[{id:0,subtitle:"",subcontent:[""],images:[]}]},formRule:{selecttime:{required:!0,type:"date",message:"请选择日期！",trigger:"change"},projectName:{required:!0,message:"请填写半周报标题！",trigger:"blur"}},editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}]]},placeholder:"请填写完成情况！",theme:"snow"},index:0,currentIndexFocus:""}},computed:{user:function(){return this.$store.state.user}},watch:{user:"initData"},created:function(){this.initData()},mounted:function(){var t=l.a.localStorage.getUser();this.centerId=t.center},methods:{del:function(t,e){this.formData.overState[t].subcontent.splice(e,1)},initData:function(){this.user&&(this.formData.centerId=this.user.centerId)},addsubtitle:function(){var t=this.index+1;this.formData.overState.push({id:t,subtitle:"",subcontent:[""],images:[]}),this.index=t},handleChange:function(t){this.formData.selecttime=t?new Date(t):""},addText:function(){var t=this.currentIndexFocus;if(""===t)return void this.$Message.error("请指入光标");this.formData.overState[t].subcontent.push("")},handleSuccess:function(t,e){e.url=t.data;var a=this.currentIndexFocus;return""===a?void this.$Message.error("请指入光标！"):this.formData.overState[a].images.length>4?void this.$Message.error("您已上传5张图片！"):(this.formData.overState[a].images.push(t.data),void console.log("----"+t.data))},aaa:function(t){this.currentIndexFocus=t},onEditorFocus:function(t){this.currentIndexFocus=t},submit:function(){var t=this,e=l.a.localStorage.getUser(),a=e.center,r=e.centerId,n=e.userId;this.$refs.form.validate(function(){var e=i()(o.a.mark(function e(s){var i,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=18;break}return i=t.formData,console.log(t.formData),i.centerName=a,i.centerId=r,i.updater=n,e.prev=6,e.next=9,c.a.summary.saveSemiweeklyReportNew(i);case 9:l=e.sent,t.$Message.success("保存成功!"),t.$router.go(-1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),t.$Message.error(e.t0.message);case 18:case"end":return e.stop()}},e,t,[[6,14]])}));return function(t){return e.apply(this,arguments)}}())}}}),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),a("Button",{attrs:{type:"primary",icon:"folder"},on:{click:t.submit}},[t._v("保存")])],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"18",offset:"3"}},[a("Form",{ref:"form",attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[a("FormItem",{attrs:{label:"所在中心：",prop:"selecttime"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",value:t.formData.selecttime,placement:"bottom-start",placeholder:"选择日期"},on:{"on-change":t.handleChange}})],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"半周报标题：",prop:"projectName"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{placeholder:"请输入半周报标题"},model:{value:t.formData.projectName,callback:function(e){t.$set(t.formData,"projectName",e)},expression:"formData.projectName"}})],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"工作内容：",prop:"overState"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("ul",{staticClass:"subtitle"},t._l(t.formData.overState,function(e,r){return a("li",{key:r,staticClass:"subtitlechild"},[a("Input",{attrs:{type:"text",id:"inp",placeholder:"请输入子标题"},on:{"on-focus":function(e){t.aaa(r)}},model:{value:e.subtitle,callback:function(a){t.$set(e,"subtitle",a)},expression:"val.subtitle"}}),t._v(" "),t._l(e.subcontent,function(e,n){return a("div",{key:n,staticStyle:{position:"relative"}},[a("quill-editor",{staticClass:"quill-editor",staticStyle:{"margin-top":"10px"},attrs:{options:t.editorOption,content:e},on:{focus:function(e){t.onEditorFocus(r)}},model:{value:t.formData.overState[r].subcontent[n],callback:function(e){t.$set(t.formData.overState[r].subcontent,n,e)},expression:"formData.overState[index].subcontent[indexa]"}}),t._v(" "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:0!=n,expression:"indexa != 0"}],staticStyle:{position:"absolute",right:"6px",top:"6px",cursor:"pointer"},attrs:{type:"minus-circled",size:"20"},on:{click:function(e){t.del(r,n)}}})],1)}),t._v(" "),t._l(e.images,function(t){return[a("img",{staticStyle:{width:"80px",height:"80px","margin-top":"10px",border:"1px solid #ccc"},attrs:{src:t}})]}),t._v(" "),a("br")],2)})),t._v(" "),[a("Alert",{staticStyle:{"margin-top":"10px","text-align":"center",border:"3px dotted #23B5EC",background:"#fff"}},[a("Icon",{attrs:{type:"arrow-right-c",size:"26",color:"#23B5EC"}}),t._v(" "),a("template",{slot:"desc"},[t._v("请在右侧模块库中选择你想要的模块 ")])],2)]],2),t._v(" "),a("Col",{attrs:{span:"6",offset:"2"}},[[a("Button",{attrs:{type:"primary",long:""},on:{click:t.addsubtitle}},[t._v("添加子标题")]),t._v(" "),a("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"ghost",icon:"compose",long:""},on:{click:t.addText}},[t._v("添加文字")]),t._v(" "),a("Upload",{attrs:{action:"/report/api/pictureUpLoad","on-success":t.handleSuccess,"show-upload-list":!1}},[a("Button",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{type:"ghost",icon:"ios-cloud-upload-outline",long:""}},[t._v("添加图片")]),t._v(" "),a("Button",{staticStyle:{"margin-top":"10px",opacity:"0"},attrs:{type:"ghost",disabled:"",icon:"images",long:""}},[t._v("添加图片")])],1)]],2)],1)],1)],1)],1)],1)],1)},m=[],f={render:p,staticRenderFns:m},v=f,h=a("C7Lr"),g=r,b=h(d,v,!1,g,null,null);e.default=b.exports},ZApW:function(t,e,a){"use strict";function r(t){a("MmyW")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("lC5x"),o=a.n(n),s=a("J0Oq"),i=a.n(s),c=a("0jG4"),l=a("0xDb"),u=a("aiqZ"),d=(a("L7Pj"),{name:"dailymodify",data:function(){return{components:{quillEditor:u.quillEditor},formData:{selecttime:"",projectName:"",overState:[{id:0,subtitle:"",subcontent:[""],images:[]}]},formRule:{selecttime:{required:!0,type:"date",message:"请选择日期！",trigger:"change"},projectName:{required:!0,message:"请填写日报标题！",trigger:"blur"},overState:{required:!0,type:"array",message:"请填写工作内容！",trigger:"blur"}},editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}]]},placeholder:"请填写完成情况！",theme:"snow"},index:0,currentIndexFocus:""}},created:function(){this.initData()},methods:{initData:function(){var t=this;return i()(o.a.mark(function e(){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.query.id,e.prev=1,e.next=4,c.a.summary.getContentsByIdNew({contentId:a});case 4:r=e.sent,t.$Message.success("获取数据成功！"),t.formData=r,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t.$Message.error("获取数据失败！");case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},del:function(t,e){this.formData.overState[t].subcontent.splice(e,1)},addsubtitle:function(){var t=this.index+1;this.formData.overState.push({id:t,subtitle:"",subcontent:[""],images:[]}),this.index=t},handleChange:function(t){this.formData.selecttime=t?new Date(t):""},addText:function(){var t=this.currentIndexFocus;if(""===t)return void this.$Message.error("请指入光标");this.formData.overState[t].subcontent.push("")},handleSuccess:function(t,e){e.url=t.data;var a=this.currentIndexFocus;return""===a?void this.$Message.error("请指入光标！"):this.formData.overState[a].images.length>4?void this.$Message.error("您已上传5张图片！"):(this.formData.overState[a].images.push(t.data),void console.log("----"+t.data))},aaa:function(t){this.currentIndexFocus=t},onEditorFocus:function(t){this.currentIndexFocus=t},submit:function(){var t=this,e=l.a.localStorage.getUser(),a=this.$router.query("id"),r=e.center,n=e.centerId,s=e.userId;this.$refs.form.validate(function(){var e=i()(o.a.mark(function e(i){var l,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=18;break}return l=t.formData,console.log(t.formData),l.centerName=r,l.centerId=n,l.updater=s,l.contentId=a,e.prev=7,e.next=10,c.a.summary.saveDayReportNew(l);case 10:u=e.sent,t.$Message.success("保存成功!"),t.$router.go(-1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),t.$Message.error(e.t0.message);case 18:case"end":return e.stop()}},e,t,[[7,15]])}));return function(t){return e.apply(this,arguments)}}())}}}),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),a("Button",{attrs:{type:"primary",icon:"folder"},on:{click:t.submit}},[t._v("更新")])],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"18",offset:"3"}},[a("Form",{ref:"form",attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[a("FormItem",{attrs:{label:"所在中心：",prop:"selecttime"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placement:"bottom-start",placeholder:"选择日期"},on:{"on-change":t.handleChange},model:{value:t.formData.selecttime,callback:function(e){t.$set(t.formData,"selecttime",e)},expression:"formData.selecttime"}})],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"日报标题：",prop:"projectName"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{placeholder:"请输入日报标题"},model:{value:t.formData.projectName,callback:function(e){t.$set(t.formData,"projectName",e)},expression:"formData.projectName"}})],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"工作内容：",prop:"overState"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("ul",{staticClass:"subtitle"},t._l(t.formData.overState,function(e,r){return a("li",{key:r,staticClass:"subtitlechild"},[a("Input",{attrs:{type:"text",id:"inp",placeholder:"请输入子标题"},on:{"on-focus":function(e){t.aaa(r)}},model:{value:e.subtitle,callback:function(a){t.$set(e,"subtitle",a)},expression:"val.subtitle"}}),t._v(" "),t._l(e.subcontent,function(e,n){return a("div",{key:n,staticStyle:{position:"relative"}},[a("quill-editor",{staticClass:"quill-editor",staticStyle:{"margin-top":"10px"},attrs:{options:t.editorOption,content:e},on:{focus:function(e){t.onEditorFocus(r)}},model:{value:t.formData.overState[r].subcontent[n],callback:function(e){t.$set(t.formData.overState[r].subcontent,n,e)},expression:"formData.overState[index].subcontent[indexa]"}}),t._v(" "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:0!=n,expression:"indexa != 0"}],staticStyle:{position:"absolute",right:"6px",top:"6px",cursor:"pointer"},attrs:{type:"minus-circled",size:"20"},on:{click:function(e){t.del(r,n)}}})],1)}),t._v(" "),t._l(e.images,function(t){return[a("img",{staticStyle:{width:"80px",height:"80px","margin-top":"10px",border:"1px solid #ccc"},attrs:{src:t}})]}),t._v(" "),a("br")],2)})),t._v(" "),[a("Alert",{staticStyle:{"margin-top":"10px","text-align":"center",border:"3px dotted #23B5EC",background:"#fff"}},[a("Icon",{attrs:{type:"arrow-right-c",size:"26",color:"#23B5EC"}}),t._v(" "),a("template",{slot:"desc"},[t._v("请在右侧模块库中选择你想要的模块 ")])],2)]],2),t._v(" "),a("Col",{attrs:{span:"6",offset:"2"}},[[a("Button",{attrs:{type:"primary",long:""},on:{click:t.addsubtitle}},[t._v("添加子标题")]),t._v(" "),a("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"ghost",icon:"compose",long:""},on:{click:t.addText}},[t._v("添加文字")]),t._v(" "),a("Upload",{attrs:{action:"/report/api/pictureUpLoad","on-success":t.handleSuccess,"show-upload-list":!1}},[a("Button",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{type:"ghost",icon:"ios-cloud-upload-outline",long:""}},[t._v("添加图片")]),t._v(" "),a("Button",{staticStyle:{"margin-top":"10px",opacity:"0"},attrs:{type:"ghost",disabled:"",icon:"images",long:""}},[t._v("添加图片")])],1)]],2)],1)],1)],1)],1)],1)],1)},m=[],f={render:p,staticRenderFns:m},v=f,h=a("C7Lr"),g=r,b=h(d,v,!1,g,null,null);e.default=b.exports},asWs:function(t,e,a){"use strict";function r(t){a("kqWL")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("3cXf"),o=a.n(n),s=a("0xDb"),i=a("2sCs"),c=a.n(i),l={name:"summary_add",data:function(){return{formData:{centerId:"",projectName:"",workContent:"",subProject:""},formRule:{centerId:{required:!0},projectName:{required:!0,message:"请填写半周报名称！",trigger:"blur"},workContent:{required:!0,message:"请填写工作内容！",trigger:"blur"},subProject:{required:!0,message:"请填写子项目！",trigger:"blur"}}}},computed:{user:function(){return this.$store.state.user}},watch:{"formData.isRisk":"setDefaultRisk",user:"initData"},created:function(){this.initData()},methods:{initData:function(){this.user&&(this.formData.centerId=this.user.centerId)},submit:function(){var t=this,e=this.$route.query.id,a=this.formData,r=this.$store.state.centers.filter(function(e){return e.id===t.formData.centerId})[0].name;a.centerName=r,a.billId=e;var n=o()(a),i=s.a.localStorage.getToken();c.a.post("/report/api/saveHalfWeekContent",n,{headers:{"Content-Type":"application/json;charset=UTF-8",jwtToken:i}}).then(function(e){0===e.data.code?(t.$Message.success("保存成功"),t.$router.go(-1)):t.$Message.error("保存失败")})},setDefaultRisk:function(){0===this.formData.isRisk?this.formData.riskSituation="无":this.formData.riskSituation=""}}},u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),a("Button",{attrs:{type:"primary",icon:"folder"},on:{click:t.submit}},[t._v("保存")])],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12",offset:"6"}},[a("Form",{ref:"form",attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[a("FormItem",{attrs:{label:"所在中心：",prop:"centerId"}},[a("Select",{attrs:{placeholder:"请选择中心",disabled:""},model:{value:t.formData.centerId,callback:function(e){t.$set(t.formData,"centerId",e)},expression:"formData.centerId"}},t._l(t.$store.state.centers,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"半周报名称：",prop:"projectName"}},[a("Input",{attrs:{placeholder:"请输入半周报名称"},model:{value:t.formData.projectName,callback:function(e){t.$set(t.formData,"projectName",e)},expression:"formData.projectName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"半周报内容：",prop:"workContent"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入半周报内容",autosize:{minRows:2}},model:{value:t.formData.workContent,callback:function(e){t.$set(t.formData,"workContent",e)},expression:"formData.workContent"}})],1),t._v(" "),a("FormItem",{attrs:{label:"子项目名称：",prop:"subProject"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入子项目",autosize:{minRows:2}},model:{value:t.formData.subProject,callback:function(e){t.$set(t.formData,"subProject",e)},expression:"formData.subProject"}})],1)],1)],1)],1)],1)},d=[],p={render:u,staticRenderFns:d},m=p,f=a("C7Lr"),v=r,h=f(l,m,!1,v,"data-v-2f03f936",null);e.default=h.exports},cAAr:function(t,e){},cJWT:function(t,e,a){"use strict";function r(t){a("uUMv")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("lC5x"),o=a.n(n),s=a("J0Oq"),i=a.n(s),c=a("0jG4"),l={name:"summary_daily_view",data:function(){return{DayReportList:{},loading:!0}},created:function(){this.getDayReportById()},filters:{timeFormat:function(t){return t?t.substring(0,10):""}},methods:{getDayReportById:function(){var t=this;return i()(o.a.mark(function e(){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.query.id,e.prev=1,t.loading=!0,e.next=5,c.a.summary.getDayReportById({id:a});case 5:r=e.sent,t.DayReportList=r,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t.$Message.error(e.t0.message);case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}},e,t,[[1,9,13,16]])}))()}}},u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")])],1),t._v(" "),a("Card",{attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.DayReportList.title))]),t._v(" "),a("p",{attrs:{slot:"extra"},slot:"extra"},[t._v(t._s(t._f("timeFormat")(t.DayReportList.subTime)))]),t._v(" "),a("p",{staticClass:"content"},[t._v(t._s(t.DayReportList.content))])])],1)},d=[],p={render:u,staticRenderFns:d},m=p,f=a("C7Lr"),v=r,h=f(l,m,!1,v,"data-v-0b1d16b1",null);e.default=h.exports},cxrI:function(t,e,a){"use strict";function r(t){a("qGtR")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("3cXf"),o=a.n(n),s=a("a3Yh"),i=a.n(s),c=a("lC5x"),l=a.n(c),u=a("J0Oq"),d=a.n(u),p=a("0xDb"),m=a("0jG4"),f=(a("2sCs"),a("DMPO")),v={components:{swiper:f.swiper,swiperSlide:f.swiperSlide},data:function(){var t,e=this;return t={model1:"",delModal:!1,pubModal:!1,contentId:"",loading:!1,imglist:[],swiperOption:{autoplay:3e3,loop:!0,pagination:".swiper-pagination",paginationClickable:!0},keyword:"",modalPre:!1},i()(t,"loading",!1),i()(t,"columns",[{title:"日报名称",key:"projectName",width:120,align:"center"},{title:"工作内容",key:"dailyContent",align:"center"},{title:"发布时间",key:"publishTime",width:200,align:"center"},{title:"状态",key:"isPublish",width:100,align:"center",render:function(t,e){var a=e.row.isPublish,r="";switch(a){case 0:return r="草稿",t("span","草稿");case 1:return t("span","发布");case 2:case 3:return r="草稿",t("span","草稿");default:r=""}return r}},{title:"操作",align:"center",width:260,render:function(t,a){var r=p.a.localStorage.getUser(),n=t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.modalPre=!0,e.viewData.projectName=a.row.projectName,e.viewData.overState=a.row.overState,e.viewData.publishTime=a.row.publishTime,e.viewData.isPublish=a.row.isPublish,d()(l.a.mark(function t(){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.summary.getContentsByIdNew({contentId:a.row.id});case 3:r=t.sent,e.$Message.success("预览成功"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.$Message.error(t.t0.message);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))}}},"查看"),o=t("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$router.push({name:"dailymodify",query:{id:a.row.contentId}})}}},"修改"),s=t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.delModal=!0,e.contentId=a.row.contentId}}},"删除"),i=t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.pubModal=!0,e.contentId=a.row.contentId}}},"发布");return 0===a.row.isPublish?t("div",[n,o,s,i]):1===r.role?t("div",[n,o,s,i]):2===r.role?t("div",[n,i,s,o]):void 0}}]),i()(t,"viewData",{isPublish:"",publishTime:"",overState:"",projectName:""}),i()(t,"tableData",[]),i()(t,"total",0),i()(t,"centerId",""),i()(t,"pageIndex",1),i()(t,"pageSize",10),t},created:function(){this.getDailyContentNew()},computed:{user:function(){return this.$store.state.user}},mounted:function(){var t=p.a.localStorage.getUser();this.centerId=t.center},methods:{add:function(){this.$router.push({name:"dailyAdd"})},tableSelect:function(t){this.selectionDataList=t},search:function(){this.getDailyContentNew(1)},deletContentsManyNew:function(){var t=this;return d()(l.a.mark(function e(){var a,r,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.a.localStorage.getToken(),e.prev=1,r={contentId:r.row.id,jwtToken:a},e.next=5,m.a.summary.deletContentsManyNew(r);case 5:n=e.sent,t.$message.success("删除成功！"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.$message.error("删除失败！");case 12:case"end":return e.stop()}},e,t,[[1,9]])}))()},delOk:function(){var t=this;return d()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.summary.deletContentsManyNew({contentId:t.contentId});case 3:a=e.sent,t.$Message.success("删除成功！"),t.getDailyContentNew(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.$Message.error(e.t0.message);case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()},pubOk:function(){var t=this;return d()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.summary.publishContentsNew({contentId:t.contentId});case 3:a=e.sent,t.$Message.success("删除成功！"),t.getDailyContentNew(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.$Message.error(e.t0.message);case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()},dateChange:function(t){effectiveTime?this.tableData.daterange=new Date(t):this.tableData.daterange=""},getDailyContentNew:function(t){var e=this;return d()(l.a.mark(function a(){var r,n,s,i,c,u;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t&&(e.pageIndex=t),a.prev=1,e.loading=!0,r=p.a.localStorage.getToken(),n=p.a.localStorage.getUser(),e.centerId=n.centerId,s={daterange:e.daterange,pageIndex:e.pageIndex,pageSize:e.pageSize,centerId:e.model1,jwtToken:r},e.loading=!0,a.next=10,m.a.summary.getDailyContentNew(s);case 10:for(i=a.sent,console.log("查询工作总结中的日报清单返回结果",i),e.tableData=i.list,e.total=i.reultAllCount,c=0;c<i.reultAllCount;c++)u=o()(e.tableData[c].dailyContent),u.length>116&&(e.tableData[c].dailyContent=u.substring(0,106)+"...");a.next=19;break;case 17:a.prev=17,a.t0=a.catch(1);case 19:return a.prev=19,e.loading=!1,a.finish(19);case 22:case"end":return a.stop()}},a,e,[[1,17,19,22]])}))()}}},h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[t.$store.state.user&&1===t.$store.state.user.role?a("Button",{attrs:{type:"primary",icon:"android-add"},on:{click:t.add}},[t._v("新增")]):t._e(),t._v(" "),t.$store.state.user&&1===t.$store.state.user.role?a("span",{staticStyle:{"margin-left":"36px"}}):t._e(),t._v(" "),[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择中心"},model:{value:t.model1,callback:function(e){t.model1=e},expression:"model1"}},t._l(t.$store.state.centers,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],t._v(" "),a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"选择日期"},on:{"on-change":t.dateChange},model:{value:t.tableData.daterange,callback:function(e){t.$set(t.tableData,"daterange",e)},expression:"tableData.daterange"}}),t._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.search}},[t._v("查询")])],2),t._v(" "),a("Table",{ref:"selection",attrs:{border:"",columns:t.columns,data:t.tableData,loading:t.loading}}),t._v(" "),a("appPage",{attrs:{total:t.total,"show-elevator":"",pageIndex:t.pageIndex,pageSize:t.pageSize},on:{pageChange:t.getDailyContentNew}}),t._v(" "),a("Modal",{attrs:{width:"350"},on:{"on-ok":t.delOk},model:{value:t.delModal,callback:function(e){t.delModal=e},expression:"delModal"}},[a("p",{staticStyle:{"text-align":"center","padding-top":"20px","font-size":"15px"}},[t._v("您确定要删除所选的日报信息吗？")])]),t._v(" "),a("Modal",{attrs:{width:"350"},on:{"on-ok":t.pubOk},model:{value:t.pubModal,callback:function(e){t.pubModal=e},expression:"pubModal"}},[a("p",{staticStyle:{"text-align":"center","padding-top":"20px","font-size":"15px"}},[t._v("您确定要发布所选的日报信息吗？")])]),t._v(" "),a("Modal",{attrs:{title:"预览",width:"296"},model:{value:t.modalPre,callback:function(e){t.modalPre=e},expression:"modalPre"}},[a("Form",{ref:"form",staticStyle:{height:"366px","overflow-y":"scroll"},attrs:{"label-width":100}},[a("div",{staticStyle:{"border-bottom":"1px solid #eee",position:"relative",width:"100%",margin:"0 auto"}},[a("div",{staticClass:"sidebar"}),t._v(" "),a("div",{staticClass:"sidebarright"},[a("div",[t._v("日报")])]),t._v(" "),a("div",{staticStyle:{padding:"0 12px",width:"100%","border-bottom":"1px solid #eee","line-height":"26px"}},[a("p",{staticStyle:{"font-size":"16px","line-height":"26px"}},[t._v("\n\t\t\t\t\t          "+t._s(t.viewData.projectName)+"\n\t\t\t\t\t        ")]),t._v(" "),a("p",{staticStyle:{color:"#999","line-height":"26px","font-size":"9px"}},[t._v(t._s(t.viewData.publishTime))])]),t._v(" "),a("div",{staticStyle:{width:"100%","margin-top":"10px",color:"#666666","line-height":"22px",overflow:"hidden",padding:"0 12px",height:"96px",background:"#ECF6FF"}},[[a("swiper",{attrs:{options:t.swiperOption}},[t._l(t.viewData.overState.images,function(e){return a("swiper-slide",{key:e.id},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.src}})])}),t._v(" "),a("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)]],2)]),t._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("div",{staticStyle:{width:"100%"}},t._l(t.viewData.overState,function(e){return a("div",{staticStyle:{display:"inline-block"}},[a("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",height:"22px","line-height":"22px"}},[t._v(t._s(e.subtitle))]),t._v(" "),a("div",{staticStyle:{width:"100%"}},[t._v(t._s(e.subcontent))])])}))])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},g=[],b={render:h,staticRenderFns:g},x=b,y=a("C7Lr"),_=r,w=y(v,x,!1,_,null,null);e.default=w.exports},j8sg:function(t,e,a){"use strict";function r(t){a("OFfA")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("lC5x"),o=a.n(n),s=a("J0Oq"),i=a.n(s),c=a("0jG4"),l=a("0xDb"),u=a("aiqZ"),d=(a("L7Pj"),{name:"daily_add",data:function(){return{a:"",components:{quillEditor:u.quillEditor},formData:{selecttime:"",projectName:"",overState:[{id:0,subtitle:"",subcontent:[""],images:[]}]},formRule:{selecttime:{required:!0,type:"date",message:"请选择日期！",trigger:"change"},projectName:{required:!0,message:"请填写日报标题！",trigger:"blur"},overState:{required:!0,type:"array",message:"请填写工作内容！",trigger:"blur"}},editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}]]},placeholder:"请填写完成情况！",theme:"snow"},index:0,currentIndexFocus:""}},computed:{user:function(){return this.$store.state.user}},watch:{user:"initData"},created:function(){this.initData()},mounted:function(){var t=l.a.localStorage.getUser();this.centerId=t.center},methods:{del:function(t,e){this.formData.overState[t].subcontent.splice(e,1)},initData:function(){this.user&&(this.formData.centerId=this.user.centerId)},addsubtitle:function(){var t=this.index+1;this.formData.overState.push({id:t,subtitle:"",subcontent:[""],images:[]}),this.index=t},handleChange:function(t){this.formData.selecttime=t?new Date(t):""},addText:function(){var t=this.currentIndexFocus;if(""===t)return void this.$Message.error("请指入光标");this.formData.overState[t].subcontent.push("")},handleSuccess:function(t,e){e.url=t.data;var a=this.currentIndexFocus;return""===a?void this.$Message.error("请指入光标！"):this.formData.overState[a].images.length>4?void this.$Message.error("您已上传5张图片！"):(this.formData.overState[a].images.push(t.data),void console.log("----"+t.data))},aaa:function(t){this.currentIndexFocus=t},onEditorFocus:function(t){this.currentIndexFocus=t},submit:function(){var t=this,e=l.a.localStorage.getUser(),a=e.center,r=e.centerId,n=e.userId;this.$refs.form.validate(function(){var e=i()(o.a.mark(function e(s){var i,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=18;break}return i=t.formData,console.log(t.formData),i.centerName=a,i.centerId=r,i.updater=n,e.prev=6,e.next=9,c.a.summary.saveDayReportNew(i);case 9:l=e.sent,t.$Message.success("保存成功!"),t.$router.go(-1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),t.$Message.error(e.t0.message);case 18:case"end":return e.stop()}},e,t,[[6,14]])}));return function(t){return e.apply(this,arguments)}}())}}}),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),a("Button",{attrs:{type:"primary",icon:"folder"},on:{click:t.submit}},[t._v("保存")])],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"18",offset:"3"}},[a("Form",{ref:"form",attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[a("FormItem",{attrs:{label:"所在中心：",prop:"selecttime"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",value:t.formData.selecttime,placement:"bottom-start",placeholder:"选择日期"},on:{"on-change":t.handleChange}})],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"日报标题：",prop:"projectName"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{placeholder:"请输入日报标题"},model:{value:t.formData.projectName,callback:function(e){t.$set(t.formData,"projectName",e)},expression:"formData.projectName"}})],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"工作内容：",prop:"overState"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("ul",{staticClass:"subtitle"},t._l(t.formData.overState,function(e,r){return a("li",{key:r,staticClass:"subtitlechild"},[a("Input",{attrs:{type:"text",id:"inp",placeholder:"请输入子标题"},on:{"on-focus":function(e){t.aaa(r)}},model:{value:e.subtitle,callback:function(a){t.$set(e,"subtitle",a)},expression:"val.subtitle"}}),t._v(" "),t._l(e.subcontent,function(e,n){return a("div",{key:n,staticStyle:{position:"relative"}},[a("quill-editor",{staticClass:"quill-editor",staticStyle:{"margin-top":"10px"},attrs:{options:t.editorOption,content:e},on:{focus:function(e){t.onEditorFocus(r)}},model:{value:t.formData.overState[r].subcontent[n],callback:function(e){t.$set(t.formData.overState[r].subcontent,n,e)},expression:"formData.overState[index].subcontent[indexa]"}}),t._v(" "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:0!=n,expression:"indexa != 0"}],staticStyle:{position:"absolute",right:"6px",top:"6px",cursor:"pointer"},attrs:{type:"minus-circled",size:"20"},on:{click:function(e){t.del(r,n)}}})],1)}),t._v(" "),t._l(e.images,function(t){return[a("img",{staticStyle:{width:"80px",height:"80px","margin-top":"10px",border:"1px solid #ccc"},attrs:{src:t}})]}),t._v(" "),a("br")],2)})),t._v(" "),[a("Alert",{staticStyle:{"margin-top":"10px","text-align":"center",border:"3px dotted #23B5EC",background:"#fff"}},[a("Icon",{attrs:{type:"arrow-right-c",size:"26",color:"#23B5EC"}}),t._v(" "),a("template",{slot:"desc"},[t._v("请在右侧模块库中选择你想要的模块 ")])],2)]],2),t._v(" "),a("Col",{attrs:{span:"6",offset:"2"}},[[a("Button",{attrs:{type:"primary",long:""},on:{click:t.addsubtitle}},[t._v("添加子标题")]),t._v(" "),a("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"ghost",icon:"compose",long:""},on:{click:t.addText}},[t._v("添加文字")]),t._v(" "),a("Upload",{attrs:{action:"/report/api/pictureUpLoad","on-success":t.handleSuccess,"show-upload-list":!1}},[a("Button",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{type:"ghost",icon:"ios-cloud-upload-outline",long:""}},[t._v("添加图片")]),t._v(" "),a("Button",{staticStyle:{"margin-top":"10px",opacity:"0"},attrs:{type:"ghost",disabled:"",icon:"images",long:""}},[t._v("添加图片")])],1)]],2)],1)],1)],1)],1)],1)],1)},m=[],f={render:p,staticRenderFns:m},v=f,h=a("C7Lr"),g=r,b=h(d,v,!1,g,null,null);e.default=b.exports},kqWL:function(t,e){},qGtR:function(t,e){},rbE4:function(t,e,a){"use strict";function r(t){a("0ezj")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("lC5x"),o=a.n(n),s=a("J0Oq"),i=a.n(s),c=a("0jG4"),l=a("0xDb"),u=a("aiqZ"),d=(a("L7Pj"),{name:"halfmodify",data:function(){return{components:{quillEditor:u.quillEditor},formData:{selecttime:"",projectName:"",overState:[{id:0,subtitle:"",subcontent:[""],images:[]}]},formRule:{selecttime:{required:!0,type:"date",message:"请选择日期！",trigger:"change"},projectName:{required:!0,message:"请填写半周报标题！",trigger:"blur"}},editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}]]},placeholder:"请填写完成情况！",theme:"snow"},index:0,currentIndexFocus:""}},created:function(){this.initData()},methods:{initData:function(){var t=this;return i()(o.a.mark(function e(){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.query.id,e.prev=1,e.next=4,c.a.summary.getContentsByIdNew({contentId:a});case 4:r=e.sent,t.$Message.success("获取数据成功！"),t.formData=r,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t.$Message.error("获取数据失败！");case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},del:function(t,e){this.formData.overState[t].subcontent.splice(e,1)},addsubtitle:function(){var t=this.index+1;this.formData.overState.push({id:t,subtitle:"",subcontent:[""],images:[]}),this.index=t},handleChange:function(t){this.formData.selecttime=t?new Date(t):""},addText:function(){var t=this.currentIndexFocus;if(""===t)return void this.$Message.error("请指入光标");this.formData.overState[t].subcontent.push("")},handleSuccess:function(t,e){e.url=t.data;var a=this.currentIndexFocus;return""===a?void this.$Message.error("请指入光标！"):this.formData.overState[a].images.length>4?void this.$Message.error("您已上传5张图片！"):(this.formData.overState[a].images.push(t.data),void console.log("----"+t.data))},aaa:function(t){this.currentIndexFocus=t},onEditorFocus:function(t){this.currentIndexFocus=t},submit:function(){var t=this,e=this.$router.query("id"),a=l.a.localStorage.getUser(),r=a.center,n=a.centerId,s=a.userId;this.$refs.form.validate(function(){var a=i()(o.a.mark(function a(i){var l,u;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!i){a.next=18;break}return l=t.formData,console.log(t.formData),l.centerName=r,l.centerId=n,l.updater=s,l.contentId=e,a.prev=7,a.next=10,c.a.summary.saveDayReportNew(l);case 10:u=a.sent,t.$Message.success("保存成功!"),t.$router.go(-1),a.next=18;break;case 15:a.prev=15,a.t0=a.catch(7),t.$Message.error(a.t0.message);case 18:case"end":return a.stop()}},a,t,[[7,15]])}));return function(t){return a.apply(this,arguments)}}())}}}),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),a("Button",{attrs:{type:"primary",icon:"folder"},on:{click:t.submit}},[t._v("更新")])],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"18",offset:"3"}},[a("Form",{ref:"form",attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[a("FormItem",{attrs:{label:"所在中心：",prop:"selecttime"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placement:"bottom-start",placeholder:"选择日期"},on:{"on-change":t.handleChange},model:{value:t.formData.selecttime,callback:function(e){t.$set(t.formData,"selecttime",e)},expression:"formData.selecttime"}})],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"半周报标题：",prop:"projectName"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{placeholder:"请输入半周报标题"},model:{value:t.formData.projectName,callback:function(e){t.$set(t.formData,"projectName",e)},expression:"formData.projectName"}})],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"工作内容：",prop:"overState"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("ul",{staticClass:"subtitle"},t._l(t.formData.overState,function(e,r){return a("li",{key:r,staticClass:"subtitlechild"},[a("Input",{attrs:{type:"text",id:"inp",placeholder:"请输入子标题"},on:{"on-focus":function(e){t.aaa(r)}},model:{value:e.subtitle,callback:function(a){t.$set(e,"subtitle",a)},expression:"val.subtitle"}}),t._v(" "),t._l(e.subcontent,function(e,n){return a("div",{key:n,staticStyle:{position:"relative"}},[a("quill-editor",{staticClass:"quill-editor",staticStyle:{"margin-top":"10px"},attrs:{options:t.editorOption,content:e},on:{focus:function(e){t.onEditorFocus(r)}},model:{value:t.formData.overState[r].subcontent[n],callback:function(e){t.$set(t.formData.overState[r].subcontent,n,e)},expression:"formData.overState[index].subcontent[indexa]"}}),t._v(" "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:0!=n,expression:"indexa != 0"}],staticStyle:{position:"absolute",right:"6px",top:"6px",cursor:"pointer"},attrs:{type:"minus-circled",size:"20"},on:{click:function(e){t.del(r,n)}}})],1)}),t._v(" "),t._l(e.images,function(t){return[a("img",{staticStyle:{width:"80px",height:"80px","margin-top":"10px",border:"1px solid #ccc"},attrs:{src:t}})]}),t._v(" "),a("br")],2)})),t._v(" "),[a("Alert",{staticStyle:{"margin-top":"10px","text-align":"center",border:"3px dotted #23B5EC",background:"#fff"}},[a("Icon",{attrs:{type:"arrow-right-c",size:"26",color:"#23B5EC"}}),t._v(" "),a("template",{slot:"desc"},[t._v("请在右侧模块库中选择你想要的模块 ")])],2)]],2),t._v(" "),a("Col",{attrs:{span:"6",offset:"2"}},[[a("Button",{attrs:{type:"primary",long:""},on:{click:t.addsubtitle}},[t._v("添加子标题")]),t._v(" "),a("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"ghost",icon:"compose",long:""},on:{click:t.addText}},[t._v("添加文字")]),t._v(" "),a("Upload",{attrs:{action:"/report/api/pictureUpLoad","on-success":t.handleSuccess,"show-upload-list":!1}},[a("Button",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{type:"ghost",icon:"ios-cloud-upload-outline",long:""}},[t._v("添加图片")]),t._v(" "),a("Button",{staticStyle:{"margin-top":"10px",opacity:"0"},attrs:{type:"ghost",disabled:"",icon:"images",long:""}},[t._v("添加图片")])],1)]],2)],1)],1)],1)],1)],1)],1)},m=[],f={render:p,staticRenderFns:m},v=f,h=a("C7Lr"),g=r,b=h(d,v,!1,g,null,null);e.default=b.exports},uUMv:function(t,e){}});