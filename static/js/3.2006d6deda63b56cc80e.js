webpackJsonp([3],{"/GWw":function(t,e){},"2GNJ":function(t,e,a){"use strict";function r(t){a("KeLZ")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("lC5x"),o=a.n(i),s=a("J0Oq"),n=a.n(s),l=a("0xDb"),c=a("0jG4"),d=(a("Du/2"),a("L7Pj")),p=a.n(d),u=function(){var t=new Date;return t.setMonth(t.getMonth()-1),t},m={data:function(){var t=this;return{nextt:1,pageCount:"",aaa:!1,isImportant:"",centerId:"",tableHeight:450,modalPre:!1,projectList:[],model1:"",loading:!1,aaaaa:143434,daterange:[],overState:"",options:{disabledDate:function(t){return t&&t.getTime()>Date.now()},date:u()},formData:{updateTime:"",centerId:null,isImportant:0,projectName:"",workProject:"",workContent:"",overState:"",responsible:"",cooperator:"",timeLimit:"",isRisk:0,riskSituation:"",remark:"无",leaders:""},formRule:{updateTime:{required:!0},centerId:{required:!0},isImportant:{required:!0},projectName:{required:!0,message:"请填写项目名称！",trigger:"blur"},workProject:{required:!0,message:"请填写工作项目！",trigger:"blur"},workContent:{required:!0,message:"请填写工作内容！",trigger:"blur"},overState:{required:!0,message:"请填写完成情况！",trigger:"blur"},responsible:{required:!0,message:"请填写责任人！",trigger:"blur"},cooperator:{required:!0,message:"请填写配合人！",trigger:"blur"},timeLimit:{required:!0,message:"请填写完成时限！",trigger:"blur"},isRisk:{required:!0},riskSituation:{required:!0,message:"请填写项目风险！",trigger:"blur"},leaders:{required:!0,message:"@领导人为空！",trigger:"blur"}},columns4:[{type:"selection",width:60,align:"center"},{title:"清单类型",key:"projectType",width:70},{title:"政企归属部门",key:"centerName",width:80},{title:"项目名称",key:"projectName",width:70},{title:"项目简介",key:"workProject",width:70},{title:"合同金额",key:"workProject",width:70},{title:"2018入账金额",key:"workProject",width:80},{title:"项目进展",key:"workContent",width:70,render:function(t,e){return t("span",{domProps:{innerHTML:e.row.workContent.substring(0,7)+"..."}})}},{title:"项目存在问题",key:"riskSituation",width:80,render:function(t,e){return t("span",{domProps:{innerHTML:e.row.riskSituation.substring(0,7)+"..."}})}},{title:"归属中心",key:"centerName",width:70},{title:"责任人",key:"responsible",width:80},{title:"发布时间",key:"publishTime",align:"center"},{title:"状态",key:"isPublish",width:57,align:"center",render:function(t,e){switch(e.row.isPublish){case 0:return t("span","草稿");case 1:return t("span","发布")}}},{title:"操作",width:130,align:"center",render:function(e,a){var r=l.a.localStorage.getUser(),i=e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.contentId=a.row.contentId,t.initData(),t.modalPre=!0}}},"查看"),s=e("Button",{props:{type:"warning",size:"small"},on:{click:function(){t.$router.push({name:"projectModify",query:{id:a.row.contentId}})}}},"编辑"),d=e("Button",{props:{type:"warning",size:"small"},on:{click:function(){t.$router.push({name:"projectTemplate",query:{id:a.row.contentId}})}}},"模板"),p=e("Button",{props:{type:"success",size:"small"},on:{click:function(){var e={title:"发布",content:"确定要发布「 "+a.row.projectName+" 」吗?",width:350,onOk:function(){function t(){return e.apply(this,arguments)}var e=n()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.project.publishContentsNew({contentId:a.row.contentId});case 3:this.$Message.success("发布成功！"),a.row.isPublish=1,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),this.$Message.error("操作失败!");case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return t}()};t.$Modal.confirm(e)}}},"发布");return 1===a.row.isPublish?e("div",[i,d]):1===r.role?e("div",[i,s]):2===r.role?e("div",[i,p]):void 0}}],tableData:[],centerData:[],selectionDataList:[],total:0,pageIndex:1,pageSize:10,delModal:!1,pubModal:!1,contentId:""}},created:function(){this.getDataList(),this.getAllCenterNew()},mounted:function(){var t=l.a.localStorage.getUser();this.centerId=t.center},watch:{"formData.isFocused":"setDefaultfocus","formData.isImportant":"setDefaultisImportant"},computed:{user:function(){return this.$store.state.user}},methods:{downloadModel:function(){console.log("下载文件"),window.location.href="/csreport/api/exportBatchResult"},uploadSuccess:function(t,e){console.log(t),0===t.code?(this.$Message.success("导入成功"),this.getDataList()):(this.$Message.error(t.desc),this.$refs.uploadContent.clearFiles())},initData:function(){var t=this;return n()(o.a.mark(function e(){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.contentId,e.prev=1,e.next=4,c.a.project.getContent({contentId:a});case 4:r=e.sent,console.log(r),t.formData=r,p()("#overState").html(t.formData.overState),console.log(r),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),t.$Message.error("获取初始数据失败！");case 15:case"end":return e.stop()}},e,t,[[1,11]])}))()},dropperNext:function(){this.nextt=2},tableSelect:function(t){this.selectionDataList=t},deleteMsg:function(){var t=this;this.selectionDataList.length<1?this.$Message.info("请选择要删除的信息"):this.selectionDataList.forEach(function(e,a){t.delModal=!0})},pubMsg:function(){var t=this;if(this.selectionDataList.length<1)return this.$Message.info("请选择要发布的信息"),!1;var e=!1,a=l.a.localStorage.getUser();this.selectionDataList.forEach(function(r,i){1!==a.role?(e=!0,t.pubModal=!0):t.$Message.info("您没有发布权限")})},pubOk:function(){var t=this;return n()(o.a.mark(function e(){var a,r,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.selectionDataList.forEach(function(t,e){a.push(t.contentId)}),r={contentId:a.join(",")+","},e.prev=3,e.next=6,c.a.project.ispublishContentsNew(r);case 6:if(i=e.sent,console.log(i.code),0!=i.code){e.next=22;break}return e.prev=9,e.next=12,c.a.project.publishContentsNew(r);case 12:t.$Message.success("发布成功！"),t.isPublish=1,t.getDataList(1),t.selectionDataList=[],e.next=22;break;case 18:e.prev=18,e.t0=e.catch(9),console.log("------------》e"),t.$Message.error("操作失败!");case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(3),t.$Message.error("存在已发布！");case 27:case"end":return e.stop()}},e,t,[[3,24],[9,18]])}))()},delOk:function(){var t=this;return n()(o.a.mark(function e(){var a,r,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.selectionDataList.forEach(function(t,e){a.push(t.contentId)}),r={contentId:a.join(",")+","},e.prev=3,t.loading=!0,e.next=7,c.a.project.deletContentsManyNew(r);case 7:i=e.sent,t.$Message.info("删除成功"),t.search(),t.selectionDataList=[],e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),t.$Message.error(e.t0.message);case 16:return e.prev=16,t.loading=!1,e.finish(16);case 19:case"end":return e.stop()}},e,t,[[3,13,16,19]])}))()},add:function(){this.$router.push({name:"projectAdd",query:this.$route.query})},search:function(){this.getDataList(1)},getAllCenterNew:function(){var t=this;return n()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,c.a.project.getAllCenterNew();case 4:a=e.sent,t.projectList=a,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.$Message.info("获取失败");case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case"end":return e.stop()}},e,t,[[0,8,11,14]])}))()},getDataList:function(t){var e=this;return n()(o.a.mark(function a(){var r,i,s,n,l,d,p,u;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t&&(e.pageIndex=t),a.prev=1,r={daterange:e.daterange,pageIndex:e.pageIndex,pageSize:e.pageSize,centerId:e.model1},e.loading=!0,a.next=6,c.a.project.getProjectNewList(r);case 6:i=a.sent,e.tableData=i.list,e.pageCount=i.pageCount,e.total=i.reultAllCount,s=e.tableData;for(n in s)l=s[n].workProject,d=l.substring(0,18),s[n].workProject.length>18&&(s[n].workProject=d+"...");for(n in s)p=s[n].overState,u=p.substring(0,32),s[n].overState.length>32&&(s[n].overState=u+"...");a.next=18;break;case 15:a.prev=15,a.t0=a.catch(1),e.$Message.error(a.t0.message);case 18:return a.prev=18,e.loading=!1,a.finish(18);case 21:case"end":return a.stop()}},a,e,[[1,15,18,21]])}))()},getstr:function(t){return p()("#overStatea").html(t)},dateChange:function(t){this.daterange=t},getList:function(t){this.$refs.selection;this.selectionDataList=t},setDefaultfocus:function(){0===this.formData.isFocused?this.formData.isFocused="关注":1===this.formData.isFocused&&(this.formData.isFocused="已关注",this.aaa=!0)},setDefaultisImportant:function(){0===this.formData.isImportant?this.isImportant=" ":1===this.formData.isImportant&&(this.isImportant="重点")}}},f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"ui-toolbar"},[t.$store.state.user&&1===t.$store.state.user.role?r("Button",{staticStyle:{position:"relative",top:"27px"},attrs:{type:"primary",icon:"android-add"},on:{click:t.add}},[t._v("新增")]):t._e(),t._v(" "),t.$store.state.user&&1===t.$store.state.user.role?r("span",{staticStyle:{"margin-left":"36px"}}):t._e(),t._v(" "),[t._v("\n      \t清单类型\n      \t "),r("Select",{staticStyle:{width:"170px","margin-right":"27px"},attrs:{placeholder:"请选择清单类型"},model:{value:t.model1,callback:function(e){t.model1=e},expression:"model1"}},t._l(t.$store.state.centers,function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),t._v("\n\t\t\t     政企归属部门\n\t\t\t     "),r("Select",{staticStyle:{width:"170px"},attrs:{placeholder:"请选择政企归属部门"},model:{value:t.model1,callback:function(e){t.model1=e},expression:"model1"}},t._l(t.$store.state.centers,function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),r("br"),r("br"),t._v(" "),t.$store.state.user&&1===t.$store.state.user.role?r("span",{staticStyle:{"margin-left":"109.77px"}}):t._e(),t._v("\n                归属中心\n\t\t\t     "),t.$store.state.user&&1===t.$store.state.user.role?r("i-input",{staticStyle:{width:"170px","margin-right":"27px"},attrs:{value:t.centerId,disabled:"",placeholder:"centerId",style:"width: 170px;margin-right:27px;"}}):t._e()],t._v(" "),r("DatePicker",{staticStyle:{width:"247px"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"选择日期"},on:{"on-change":t.dateChange}}),t._v(" "),r("Button",{staticStyle:{position:"relative",bottom:"27px",left:"37px"},attrs:{type:"primary",icon:"ios-search"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),r("div",{staticClass:"pull-right",staticStyle:{width:"196px",position:"relative !important","z-index":"222!important"}},[t.$store.state.user&&1===t.$store.state.user.role?r("Button",{attrs:{type:"info",icon:"android-download"},on:{click:t.downloadModel}},[t._v("下载")]):t._e(),t._v(" "),t.$store.state.user&&1===t.$store.state.user.role?r("Upload",{ref:"uploadContent",staticClass:"pull-right",staticStyle:{width:"90px",position:"relative","z-index":"2222"},attrs:{"show-upload-list":!1,"on-success":t.uploadSuccess,format:["xlsx","xls"],name:"file",action:"/report/api/imporBatchRecharge",accept:"application/vnd.ms-excel"}},[r("Button",{staticClass:"upload",attrs:{type:"info",icon:"ios-cloud-upload-outline"}},[t._v("导入")])],1):t._e()],1)],2),t._v(" "),r("Alert",{staticStyle:{height:"46px","line-height":"26px"},attrs:{type:"warning","show-icon":""}},[t._v("已选择"+t._s(t.selectionDataList.length)+"项数据\n\t     \t"),r("div",{staticClass:"pull-right"},[t.$store.state.user&&2===t.$store.state.user.role?r("Button",{attrs:{type:"primary"},on:{click:t.pubMsg}},[t._v("发布")]):t._e(),t._v(" "),t.$store.state.user&&2!==t.$store.state.user.role?r("Button",{attrs:{type:"error"},on:{click:t.deleteMsg}},[t._v("批量删除")]):t._e()],1)]),t._v(" "),r("Table",{ref:"selection",attrs:{border:"",columns:t.columns4,data:t.tableData,loading:t.loading},on:{"on-selection-change":t.tableSelect}}),t._v(" "),r("appPage",{attrs:{total:t.total,"show-elevator":"",pageIndex:t.pageIndex,pageSize:t.pageSize},on:{pageChange:t.getDataList}}),t._v(" "),r("Modal",{attrs:{width:"350"},on:{"on-ok":t.delOk},model:{value:t.delModal,callback:function(e){t.delModal=e},expression:"delModal"}},[r("p",{staticStyle:{"text-align":"center","padding-top":"20px","font-size":"15px"}},[t._v("您确定要删除所选的项目推进信息吗？")])]),t._v(" "),r("Modal",{attrs:{width:"350"},on:{"on-ok":t.pubOk},model:{value:t.pubModal,callback:function(e){t.pubModal=e},expression:"pubModal"}},[r("p",{staticStyle:{"text-align":"center","padding-top":"20px","font-size":"15px"}},[t._v("您确定要发布所选的项目推进信息吗？")])]),t._v(" "),r("Modal",{attrs:{title:"预览",width:"296"},model:{value:t.modalPre,callback:function(e){t.modalPre=e},expression:"modalPre"}},[r("Form",{ref:"form",staticStyle:{height:"366px","overflow-y":"scroll"},attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[r("div",{staticStyle:{"border-bottom":"1px solid #eee",position:"relative",width:"100%",margin:"0 auto","box-shadow":"0 5px 15px #eee","border-radius":"12px"}},[r("img",{staticStyle:{width:"18%",float:"right"},attrs:{src:a("VgYa")}}),t._v(" "),r("div",{staticStyle:{padding:"0 12px",width:"90%","line-height":"26px"}},[r("p",{staticStyle:{"font-size":"18px","line-height":"26px"}},[t._v("\n\t\t\t\t\t          "+t._s(t.formData.centerName)+"--"+t._s(t.formData.projectName)+" \n\t\t\t\t\t        ")]),t._v(" "),r("p",{staticStyle:{color:"#999"}},[r("Icon",{attrs:{type:"star"}}),t._v(" "),t.aaa?r("span",{staticStyle:{color:"#EE701E"}},[t._v(t._s(t.formData.isFocused))]):r("span",[t._v(t._s(t.formData.isFocused))]),t._v("\n\t\t\t\t\t        \t    "+t._s(t.isImportant)+"\n\t\t\t\t\t        ")],1),t._v(" "),r("p",{staticStyle:{color:"#999","line-height":"26px","font-size":"9px"}},[t._v(t._s(t.formData.updateTime))])]),t._v(" "),r("div",{staticStyle:{width:"100%",color:"#666666","line-height":"22px",padding:"0 12px",height:"46px",background:"#ECF6FF"}},[r("div",{staticStyle:{color:"#666666",width:"100%"}},[r("span",{staticStyle:{color:"#666666",width:"48%","text-overflow":"ellipsis",float:"left",overflow:"hidden","white-space":"nowrap"}},[t._v("合同金额："+t._s(t.formData.timeLimit))]),r("div",{staticStyle:{float:"right",color:"#666666",width:"48%","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[t._v("2018入账金额:"),r("span",{staticStyle:{color:"#0084cf"}},[t._v(t._s(t.formData.centerName))])])]),t._v(" "),r("div",{staticStyle:{color:"#666666",width:"100%"}},[r("span",{staticStyle:{color:"#666666",width:"48%","text-overflow":"ellipsis",float:"left",overflow:"hidden","white-space":"nowrap"}},[t._v(" 所属中心："+t._s(t.formData.centerName))]),r("div",{staticStyle:{float:"right",color:"#666666",width:"48%","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap",display:"inline-block"}},[t._v(" 责任人："+t._s(t.formData.cooperator))])])])]),t._v(" "),r("div",{staticStyle:{"text-align":"left"}},[r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("工作内容")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.workContent))])])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("完成情况")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"},attrs:{id:"overState"}})])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("开票回款风险")]),t._v(" "),r("div",{class:{redText:"无"!==t.formData.riskSituation},staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.riskSituation))])])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("备注")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.remark))])])])])]),t._v(" "),r("div",{staticStyle:{width:"100%","text-align":"center","line-height":"37px",cursor:"pointer"},attrs:{id:"dropper"},on:{click:t.dropperNext}},[t._v("\n\t      \t上滑显示下一项\n\t      \t"),r("p",{directives:[{name:"show",rawName:"v-show",value:2==t.nextt,expression:"nextt==2"}],staticStyle:{height:"77px",display:"block"}},[t._v("正在加载...")])]),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},h=[],v={render:f,staticRenderFns:h},g=v,b=a("C7Lr"),w=r,x=b(m,g,!1,w,"data-v-62a04a5e",null);e.default=x.exports},"2gfQ":function(t,e){},"3dQ8":function(t,e,a){"use strict";function r(t){a("Zbdj")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("3cXf"),o=a.n(i),s=a("a3Yh"),n=a.n(s),l=a("lC5x"),c=a.n(l),d=a("J0Oq"),p=a.n(d),u=a("0xDb"),m=a("0jG4"),f=(a("Du/2"),a("L7Pj")),h=a.n(f),v=function(){var t=new Date;return t.setMonth(t.getMonth()-1),t},g={data:function(){var t,e=this;return t={pageCount:"",keyword:"",aaa:!1,isImportant:"",centerId:"",tableHeight:450,modalPre:!1,projectList:[],model1:"",loading:!1,aaaaa:143434,daterange:[],overState:"",options:{disabledDate:function(t){return t&&t.getTime()>Date.now()},date:v()},data1:[],formData:{updateTime:"",centerId:null,isImportant:0,projectName:"",workProject:"",workContent:"",overState:"",responsible:"",cooperator:"",timeLimit:"",isRisk:0,riskSituation:"",remark:"无",leaders:""},formRule:{updateTime:{required:!0},centerId:{required:!0},isImportant:{required:!0},projectName:{required:!0,message:"请填写项目名称！",trigger:"blur"},workProject:{required:!0,message:"请填写工作项目！",trigger:"blur"},workContent:{required:!0,message:"请填写工作内容！",trigger:"blur"},overState:{required:!0,message:"请填写完成情况！",trigger:"blur"},responsible:{required:!0,message:"请填写责任人！",trigger:"blur"},cooperator:{required:!0,message:"请填写配合人！",trigger:"blur"},timeLimit:{required:!0,message:"请填写完成时限！",trigger:"blur"},isRisk:{required:!0},riskSituation:{required:!0,message:"请填写项目风险！",trigger:"blur"},leaders:{required:!0,message:"@领导人为空！",trigger:"blur"}},columns4:[{title:"部门",key:"department",width:100,align:"center"},{title:"中心",key:"center",width:110,align:"center"},{title:"姓名",width:80,key:"name",className:"Newheightname",align:"center"},{title:"账号",key:"account",align:"center",width:120},{title:"权限角色",key:"userPermissionInfo",align:"center",width:100},{title:"状态",key:"userPermissionInfo",width:80,align:"center",render:function(t,e){var a=e.row.isPublish;switch(a){case 0:return t("span","草稿");case 1:return t("span","发布");default:return t("span","草稿")}}},{title:"操作",align:"center",render:function(t,a){var r=u.a.localStorage.getUser(),i=t("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$router.push({name:"manage_modify",query:{name:a.row.name}})}}},"修改"),o=t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){var t={title:"发布",content:"确定要删除「 "+a.row.name+" 」吗",width:350,onOk:function(){function t(){return e.apply(this,arguments)}var e=p()(c.a.mark(function t(){var e,r,i,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=a.row.account,r=u.a.localStorage.getToken(),alert(r),i={account:e,jwtToken:r},t.next=7,m.a.permissions.deleteUserPermission(i);case 7:o=t.sent,this.queryUserPermissionListing(1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),this.$Message.error(t.t0.message);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return t}()};e.$Modal.confirm(t)}}},"删除"),s=t("Button",{props:{type:"warning",size:"small"},on:{click:function(){var t={title:"重置密码",content:"确定「 "+a.row.name+" 」密码重置吗?",width:360,onOk:function(){function t(){return e.apply(this,arguments)}var e=p()(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.a.localStorage.getToken(),t.prev=1,t.next=4,m.a.permissions.resetPasswordByAccount({account:a.row.account,jwtToken:e});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),this.$Message.error(t.t0.message);case 9:case"end":return t.stop()}},t,this,[[1,6]])}));return t}()};e.$Modal.confirm(t)}}},"重置密码"),n=t("Button",{props:{type:"success",size:"small"},on:{click:function(){var t={title:"发布",content:"确定要发布「 "+a.row.projectName+" 」吗?",width:350,onOk:function(){function t(){return e.apply(this,arguments)}var e=p()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.project.publishContentsNew({contentId:a.row.contentId});case 3:this.$Message.success("发布成功！"),a.row.isPublish=1,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),this.$Message.error("操作失败!");case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return t}()};e.$Modal.confirm(t)}}},"发布");return 1===a.row.isPublish?t("div",[i,s]):1===r.role?t("div",[i,o,s,n]):2===r.role?t("div",[i,n]):void 0}}],tableData:[],centerData:[],selectionDataList:[],total:0},n()(t,"formData",{pageIndex:1,pageSize:10,organizationId:""}),n()(t,"pageIndex",1),n()(t,"pageSize",10),n()(t,"delModal",!1),n()(t,"pubModal",!1),n()(t,"contentId",""),n()(t,"structure",""),n()(t,"structureId",""),n()(t,"structureName",""),n()(t,"value",""),t},created:function(){this.manage(),this.queryUserPermissionListing()},mounted:function(){var t=u.a.localStorage.getUser();this.centerId=t.center},watch:{"formData.isFocused":"setDefaultfocus","formData.isImportant":"setDefaultisImportant"},computed:{user:function(){return this.$store.state.user}},methods:{a:function(t){var e=this;return p()(c.a.mark(function t(){var a,r,i,s,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.$refs.tree4.getSelectedNodes(),r=o()(a),console.log(r),e.structure=a[0].id,i=27,s=1,n=10,e.structureId=a[0].parent_id,e.structureName=a[0].title,console.log(e.structure),console.log(e.structureName),e.$store.dispatch("DepartmentContainUser",{organizationId:i,pageIndex:s,pageSize:n}).then(function(t){}),console.log(e.$store.state.manageList);case 13:case"end":return t.stop()}},t,e)}))()},downloadModel:function(){console.log("下载文件"),window.location.href="/csreport/api/exportBatchResult"},addStructure:function(){var t=this;return p()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.structureId?t.$Modal.confirm({render:function(e){return e("Input",{props:{value:t.value,autofocus:!0,placeholder:"添加结构名称"},on:{input:function(e){t.value=e}}})},onOk:function(){var e=p()(c.a.mark(function e(){var a,r,i,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.value,r=u.a.localStorage.getToken(),e.prev=2,i={structureId:t.structureId,structureName:a,jwtToken:r},e.next=6,m.a.userManage.addStructure(i);case 6:o=e.sent,t.manage(),t.$Message.success("success"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),t.$Message.error(e.t0.message);case 14:case"end":return e.stop()}},e,t,[[2,11]])}));return function(){return e.apply(this,arguments)}}()}):t.$Notice.warning({title:"请选择新增结构节点"});case 1:case"end":return e.stop()}},e,t)}))()},updateStructureName:function(){var t=this;return p()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:""!==t.structure?t.$Modal.confirm({render:function(e){return e("Input",{props:{value:t.value,autofocus:!0,placeholder:"添加结构名称"},on:{input:function(e){t.value=e}}})},onOk:function(){var e=p()(c.a.mark(function e(){var a,r,i,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.value,r=u.a.localStorage.getToken(),e.prev=2,i={structureId:t.structure,structureName:a,jwtToken:r},e.next=6,m.a.userManage.updateStructureName(i);case 6:o=e.sent,t.manage(),t.$Message.success("success"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),t.$Message.error(e.t0.message);case 14:case"end":return e.stop()}},e,t,[[2,11]])}));return function(){return e.apply(this,arguments)}}()}):t.$Notice.warning({title:"请选择修改结构节点！"});case 1:case"end":return e.stop()}},e,t)}))()},deleteStructureNameById:function(){var t=this;return p()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.structure?t.$Modal.confirm({render:function(e){return e("span",{domProps:{innerHTML:"确认删除当前选择节点"},on:{input:function(e){t.value=e}}})},onOk:function(){var e=p()(c.a.mark(function e(){var a,r,i,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.value,r=u.a.localStorage.getToken(),e.prev=2,i={structureId:t.structure,jwtToken:r},e.next=6,m.a.userManage.deleteStructureNameById(i);case 6:o=e.sent,t.manage(),t.$Message.success("success"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),t.$Message.error(e.t0.message);case 14:case"end":return e.stop()}},e,t,[[2,11]])}));return function(){return e.apply(this,arguments)}}()}):t.$Notice.warning({title:"请选择删除结构节点"});case 1:case"end":return e.stop()}},e,t)}))()},queryUserPermissionListing:function(t){var e=this;return p()(c.a.mark(function a(){var r,i,o;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t&&(e.pageIndex=t),r=u.a.localStorage.getToken(),a.prev=2,e.loading=!0,i={pageIndex:e.pageIndex,pageSize:e.pageSize,jwtToken:r},a.next=7,m.a.permissions.queryUserPermissionListing(i);case 7:o=a.sent,e.tableData=o.list,e.$Message.success("查询成功！"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(2),e.$Message.error("查询失败");case 15:return a.prev=15,e.loading=!1,a.finish(15);case 18:case"end":return a.stop()}},a,e,[[2,12,15,18]])}))()},uploadSuccess:function(t,e){console.log(t),0===t.code?(this.$Message.success("导入成功"),this.getDataList()):(this.$Message.error(t.desc),this.$refs.uploadContent.clearFiles())},queryUserPermissionBycontent:function(){var t=this;return p()(c.a.mark(function e(){var a,r,i,o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.a.localStorage.getUser(),r=a.name,i=u.a.localStorage.getToken(),e.prev=3,o={jwtToken:i,content:"教育行业中心"},e.next=7,m.a.permissions.queryUserPermissionBycontent(o);case 7:s=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t.$Message.error("获取数据失败！");case 13:case"end":return e.stop()}},e,t,[[3,10]])}))()},manage:function(){var t=this;return p()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,m.a.userManage.findAll();case 4:a=e.sent,t.data1=a,t.data1.expand=!0,t.data1=[t.data1],e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t.$Message.error(e.t0.message);case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}},e,t,[[0,10,13,16]])}))()},tableSelect:function(t){this.selectionDataList=t},deleteMsg:function(){var t=this;this.selectionDataList.length<1?this.$Message.info("请选择要删除的信息"):this.selectionDataList.forEach(function(e,a){t.delModal=!0})},pubMsg:function(){var t=this;if(this.selectionDataList.length<1)return this.$Message.info("请选择要发布的信息"),!1;var e=!1,a=u.a.localStorage.getUser();this.selectionDataList.forEach(function(r,i){1!==a.role?(e=!0,t.pubModal=!0):t.$Message.info("您没有发布权限")})},pubOk:function(){var t=this;return p()(c.a.mark(function e(){var a,r,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.selectionDataList.forEach(function(t,e){a.push(t.contentId)}),r={contentId:a.join(",")+","},e.prev=3,e.next=6,m.a.project.ispublishContentsNew(r);case 6:if(i=e.sent,console.log(i.code),0!=i.code){e.next=22;break}return e.prev=9,e.next=12,m.a.project.publishContentsNew(r);case 12:t.$Message.success("发布成功！"),t.isPublish=1,t.getDataList(1),t.selectionDataList=[],e.next=22;break;case 18:e.prev=18,e.t0=e.catch(9),console.log("------------》e"),t.$Message.error("操作失败!");case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(3),t.$Message.error("存在已发布！");case 27:case"end":return e.stop()}},e,t,[[3,24],[9,18]])}))()},delOk:function(){var t=this;return p()(c.a.mark(function e(){var a,r,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.selectionDataList.forEach(function(t,e){a.push(t.contentId)}),r={contentId:a.join(",")+","},e.prev=3,t.loading=!0,e.next=7,m.a.project.deletContentsManyNew(r);case 7:i=e.sent,t.$Message.info("删除成功"),t.search(),t.selectionDataList=[],e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),t.$Message.error(e.t0.message);case 16:return e.prev=16,t.loading=!1,e.finish(16);case 19:case"end":return e.stop()}},e,t,[[3,13,16,19]])}))()},add:function(){this.$router.push({name:"manageadd",query:this.$route.query})},search:function(){this.queryUserPermissionListing(1)},getAllCenterNew:function(){var t=this;return p()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,m.a.project.getAllCenterNew();case 4:a=e.sent,t.projectList=a,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.$Message.info("获取失败");case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case"end":return e.stop()}},e,t,[[0,8,11,14]])}))()},getstr:function(t){return h()("#overStatea").html(t)},dateChange:function(t){this.daterange=t},getList:function(t){this.$refs.selection;this.selectionDataList=t}}},b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticStyle:{width:"20%",float:"left"}},[r("div",{staticStyle:{width:"100%","text-align":"center","line-height":"30px"}},[t._v("组织结构")]),t._v(" "),r("div",{staticStyle:{"text-align":"center"}},[t.$store.state.user&&1===t.$store.state.user.role?r("Button",{attrs:{type:"primary"},on:{click:t.addStructure}},[t._v("新增")]):t._e(),t._v(" "),t.$store.state.user&&1===t.$store.state.user.role?r("Button",{attrs:{type:"warning"},on:{click:t.updateStructureName}},[t._v("修改")]):t._e(),t._v(" "),t.$store.state.user&&2!==t.$store.state.user.role?r("Button",{attrs:{type:"error"},on:{click:t.deleteStructureNameById}},[t._v("删除")]):t._e()],1),t._v(" "),[r("Tree",{ref:"tree4",attrs:{data:t.data1,loading:t.loading},on:{"on-select-change":function(e){t.a()}}}),t._v(" "),r("div",{staticStyle:{color:"red",display:"block"},on:{click:function(e){t.a()}}})]],2),t._v(" "),r("div",{staticStyle:{width:"80%",float:"right"}},[r("router-view")],1),t._v(" "),r("Modal",{attrs:{width:"350"},on:{"on-ok":t.delOk},model:{value:t.delModal,callback:function(e){t.delModal=e},expression:"delModal"}},[r("p",{staticStyle:{"text-align":"center","padding-top":"20px","font-size":"15px"}},[t._v("您确定要删除所选的项目推进信息吗？")])]),t._v(" "),r("Modal",{attrs:{width:"350"},on:{"on-ok":t.pubOk},model:{value:t.pubModal,callback:function(e){t.pubModal=e},expression:"pubModal"}},[r("p",{staticStyle:{"text-align":"center","padding-top":"20px","font-size":"15px"}},[t._v("您确定要发布所选的项目推进信息吗？")])]),t._v(" "),r("Modal",{attrs:{title:"预览",width:"296"},model:{value:t.modalPre,callback:function(e){t.modalPre=e},expression:"modalPre"}},[r("Form",{ref:"form",staticStyle:{height:"366px","overflow-y":"scroll"},attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[r("div",{staticStyle:{"border-bottom":"1px solid #eee",position:"relative",width:"100%",margin:"0 auto","box-shadow":"0 5px 15px #eee","border-radius":"12px"}},[r("img",{staticStyle:{width:"18%",float:"right"},attrs:{src:a("VgYa")}}),t._v(" "),r("div",{staticStyle:{padding:"0 12px",width:"90%","line-height":"26px"}},[r("p",{staticStyle:{"font-size":"18px","line-height":"26px"}},[t._v("\n\t\t\t\t\t          "+t._s(t.formData.centerName)+"--"+t._s(t.formData.projectName)+" \n\t\t\t\t\t        ")]),t._v(" "),r("p",{staticStyle:{color:"#999"}},[r("Icon",{attrs:{type:"star"}}),t._v(" "),t.aaa?r("span",{staticStyle:{color:"#EE701E"}},[t._v(t._s(t.formData.isFocused))]):r("span",[t._v(t._s(t.formData.isFocused))]),t._v("\n\t\t\t\t\t        \t    "+t._s(t.isImportant)+"\n\t\t\t\t\t        ")],1),t._v(" "),r("p",{staticStyle:{color:"#999","line-height":"26px","font-size":"9px"}},[t._v(t._s(t.formData.updateTime))])]),t._v(" "),r("div",{staticStyle:{width:"100%",color:"#666666","line-height":"22px",padding:"0 12px",height:"46px",background:"#ECF6FF"}},[r("div",{staticStyle:{color:"#666666",width:"100%"}},[r("span",{staticStyle:{color:"#666666",width:"48%","text-overflow":"ellipsis",float:"left",overflow:"hidden","white-space":"nowrap"}},[t._v("完成时限："+t._s(t.formData.timeLimit))]),r("div",{staticStyle:{float:"right",color:"#666666",width:"48%","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[t._v("所属中心:"),r("span",{staticStyle:{color:"#0084cf"}},[t._v(t._s(t.formData.centerName))])])]),t._v(" "),r("div",{staticStyle:{color:"#666666",width:"100%"}},[r("span",{staticStyle:{color:"#666666",width:"48%","text-overflow":"ellipsis",float:"left",overflow:"hidden","white-space":"nowrap"}},[t._v(" 责任人："+t._s(t.formData.responsible))]),r("div",{staticStyle:{float:"right",color:"#666666",width:"48%","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap",display:"inline-block"}},[t._v(" 配合人："+t._s(t.formData.cooperator))])])])]),t._v(" "),r("div",{staticStyle:{"text-align":"left"}},[r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("工作内容")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.workContent))])])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("完成情况")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"},attrs:{id:"overState"}})])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("开票回款风险")]),t._v(" "),r("div",{class:{redText:"无"!==t.formData.riskSituation},staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.riskSituation))])])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("备注")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.remark))])])])])]),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},w=[],x={render:b,staticRenderFns:w},k=x,_=a("C7Lr"),y=r,S=_(g,k,!1,y,"data-v-701bb969",null);e.default=S.exports},"4vbo":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAYAAABrXO8xAAAB7klEQVQ4T43Sv2sUQRQH8O+bnd29w8shaJuQaPwD9ArTiZjCIsQzURtLIa1RvBBIE9DkInZyFsEkf0AsTrBRQStBsPIHprBYTyMoYopIgvtznswtO96uhzgwzfA+7817M4Q+a3pt/7iAvMWEV7TtNB8sUlgMo+JB/X5YswW3AQyCoZioRdt2o4hzMIdMRkoYuFfEBvZHmaYEhBY+23NZ5S78NzKlEzC18CXFNLXBJywVtkEY6jeowpnBdHE98ACM/AfKQhJWuE0X1oOAACcHGVAMEKW7uJjpGU2v+XcE0TUAVhYQRMBPH7AlUC0BIoe5oxSdo9oq2yMyahJ4VmONdv00BQNwLaBaNrgTg+rtK86bbi6Nh61gJUro6u6vP5UNTit/TFQ09XCm8lqfm0ssP4knPnznDW9HHdatZddmBkoO/NqQeOpW5OXF07RnYPOxP2rZ1kswDm59433vB1c17iIb/tiwiAfKOMDMd+fGHd1Smnn5eXhSMr0gQDIQb31NcUkiHDsiompJIx1Ljxpn5KSBm5tsfToULwG4oQfEQLKzx6LiQJVdEhox2FMRT86fdd/nepxZZfvY0XgJhOu9T5MOiDwlrfr8KXpnfm/v4/bDGkWcnF8Yd9/2xv71L7p4NL4JYJaBDrG61CggneA3Aa3ZFcxyZ44AAAAASUVORK5CYII="},"6bwM":function(t,e){},A6lN:function(t,e,a){"use strict";function r(t){a("/GWw")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("lC5x"),o=a.n(i),s=a("J0Oq"),n=a.n(s),l=a("0jG4"),c={data:function(){return{title:"",panelId:"",projectList:[],loading:!0}},created:function(){this.getProjectContent()},watch:{projectList:"openDefaultPanel"},methods:{getProjectContent:function(){var t=this;return n()(o.a.mark(function e(){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.query.id,e.prev=1,t.loading=!0,e.next=5,l.a.project.getProjectContent({billId:a});case 5:r=e.sent,t.title=r.title,t.projectList=r.data.list,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t.$Message.error("获取数据失败！");case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[1,10,14,17]])}))()},openDefaultPanel:function(){0!==this.projectList.length&&this.$nextTick(function(){this.panelId=String(this.projectList[0].contentId)})}}},d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")])],1),t._v(" "),a("h3",{staticClass:"mb10"},[t._v(t._s(t.title))]),t._v(" "),t.loading?a("div",{staticClass:"loading"},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),a("div",[t._v("Loading")])],1)],1):0===t.projectList.length?a("div",[t._v("\n    暂无数据\n  ")]):a("Collapse",{attrs:{accordion:""},model:{value:t.panelId,callback:function(e){t.panelId=e},expression:"panelId"}},t._l(t.projectList,function(e,r){return a("Panel",{key:e.contentId,attrs:{name:String(e.contentId)}},[a("p",{staticClass:"ellipsis",staticStyle:{width:"100%",float:"right","margin-left":"-5px","padding-left":"8px"}},[1===e.isImportant?a("Icon",{staticClass:"icon",staticStyle:{color:"gold"},attrs:{type:"ios-star"}}):t._e(),t._v(" "),1===e.isRisk?a("Icon",{staticClass:"icon",staticStyle:{color:"red"},attrs:{type:"alert-circled"}}):t._e(),t._v("\n        "+t._s(e.centerName)+": "+t._s(e.projectName)+" - "+t._s(e.workProject)+"\n      ")],1),t._v(" "),a("p",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[a("b",{staticClass:"label"},[t._v("工作项目：")]),t._v(t._s(e.workProject)+"\n        "),a("b",{staticClass:"label"},[t._v("工作内容：")]),t._v("\n        "+t._s(e.workContent)+"\n        "),a("b",{staticClass:"label"},[t._v("完成情况：")]),t._v("\n        "+t._s(e.overState)+"\n        "),a("b",{staticClass:"label"},[t._v("责任人：")]),t._v(t._s(e.responsible)+"\n        "),a("b",{staticClass:"label"},[t._v("配合人：")]),t._v(t._s(e.cooperator)+"\n        "),a("b",{staticClass:"label"},[t._v("完成时限：")]),t._v(t._s(e.timeLimit)+"\n        "),a("b",{staticClass:"label"},[t._v("开票回款风险：")]),a("span",{class:{redText:1===e.isRisk}},[t._v(t._s(e.riskSituation))]),a("br"),t._v(" "),a("b",{staticClass:"label"},[t._v("备注：")]),t._v(t._s(e.remark)+"\n      ")])])}))],1)},p=[],u={render:d,staticRenderFns:p},m=u,f=a("C7Lr"),h=r,v=f(c,m,!1,h,"data-v-411d7d4c",null);e.default=v.exports},DS18:function(t,e,a){"use strict";function r(t){a("JBOh")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("lC5x"),o=a.n(i),s=a("J0Oq"),n=a.n(s),l=a("a3Yh"),c=a.n(l),d=a("0jG4"),p=a("aiqZ"),u=a("L7Pj"),m=a.n(u),f={components:{quillEditor:p.quillEditor},name:"manage_authority",data:function(){var t;return t={value1:[1,2,3],social1:[],social2:[],social3:[],options3:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}]]},placeholder:"请填写完成情况！",theme:"snow"},a:"0",centerId:"1",roleName:"",daterange:"",imgName:"",single:!1,defaultList:[]},c()(t,"imgName",""),c()(t,"visible",!1),c()(t,"uploadList",[]),c()(t,"formData",{selecttime:"",centerId:null,isImportant:0,projectName:"",workProject:"",workContent:"",overState:"",responsible:"",cooperator:"",timeLimit:"",isRisk:0,riskSituation:"无",remark:"无",leaders:"",picture:""}),c()(t,"formRule",{selecttime:{required:!0,type:"date",message:"请填写日期！",trigger:"change"},uploadImages:{require:!0},centerId:{required:!0},isImportant:{required:!0},projectName:{required:!0,message:"请填写项目名称！",trigger:"blur"},workProject:{required:!0,message:"请填写工作项目！",trigger:"blur"},workContent:{required:!0,message:"请填写工作内容！",trigger:"blur"},overState:{required:!0,message:"请填写完成情况！",trigger:"blur"},responsible:{required:!0,message:"请填写责任人！",trigger:"blur"},cooperator:{required:!0,message:"请填写配合人！",trigger:"blur"},timeLimit:{required:!0,type:"date",message:"请填写完成时限！",trigger:"change"},isRisk:{required:!0},riskSituation:{required:!0,message:"请填写项目风险！",trigger:"change"},picture:{required:!1}}),t},computed:{user:function(){return this.$store.state.user},editor:function(){return this.$refs.myTextEditor.quillEditor}},watch:{},created:function(){this.permissionInformation(),this.roleName=this.$route.query.name},mounted:function(){},methods:{permissionInformation:function(){var t=this;return n()(o.a.mark(function e(){var a,r,i,s,n,l,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.userManage.permissionInformation();case 3:for(a=e.sent,r=[],i=[],s=[],n=0;n<a[0].children.length;n++)r.push(a[0].children[n].name);for(t.social1=r,l=0;l<a[1].children.length;l++)i.push(a[1].children[l].name);for(t.social2=i,c=0;c<a[3].children.length;c++)s.push(a[3].children[c].name);t.social3=s,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),t.$Message.error(e.t0.message);case 18:case"end":return e.stop()}},e,t,[[0,15]])}))()},assignPermission:function(){var t=this;return n()(o.a.mark(function e(){var a,r,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.query.roleName,r=t.social1.join(",")+","+t.social2.join(",")+","+t.social3.join(",")+",",e.prev=2,i={roleName:a,permissionId:r},e.next=6,d.a.userManage.assignPermission(i);case 6:s=e.sent,t.$Message.success("权限分配成功！"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t.$Message.error(e.t0.message);case 13:case"end":return e.stop()}},e,t,[[2,10]])}))()},handleChange:function(t){this.formData.selecttime=t?new Date(t):""},dateChangea:function(t){this.formData.timeLimit=t?new Date(t):""},handleView:function(t){this.imgName=t,this.visible=!0},handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1)},handleSuccess:function(t,e){e.url=t.data,console.log("----"+t.data),this.formData.picture=t.data,console.log(this.formData.picture)},handleFormatError:function(t){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+t.name+" is incorrect, please select jpg or png."})},handleMaxSize:function(t){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+t.name+" is too large, no more than 2M."})},handleBeforeUpload:function(){var t=this.uploadList.length<1;return t||this.$Notice.warning({title:"Up to one pictures can be uploaded."}),t}}};m()(function(){setInterval(function(){m()(".ivu-checkbox").css({position:"absolute",right:"30px"})},1)});var h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),a("Button",{attrs:{type:"primary",icon:"folder"},on:{click:t.assignPermission}},[t._v("保存")])],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12",offset:"6"}},[a("div",[t._v("角色名称："+t._s(t.roleName))]),a("br"),t._v(" "),[a("Collapse",{model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},[a("Panel",{attrs:{name:"1"}},[t._v("\n\t\t\t\t            \t项目管理\n\t\t\t\t            "),a("p",{attrs:{slot:"content"},slot:"content"},[a("CheckboxGroup",{staticStyle:{"margin-left":"46px"},model:{value:t.social1,callback:function(e){t.social1=e},expression:"social1"}},[a("Checkbox",{attrs:{label:"项目编辑"}},[a("span",[t._v("项目编辑")])]),a("br"),a("br"),t._v(" "),a("Checkbox",{attrs:{label:"项目发布"}},[a("span",[t._v("项目发布")])]),a("br"),a("br"),t._v(" "),a("Checkbox",{attrs:{label:"项目查看"}},[a("span",[t._v("项目查看")])]),a("br"),a("br")],1)],1)]),t._v(" "),a("Panel",{attrs:{name:"2"}},[t._v("\n\t\t\t\t            \t新鲜事管理\n\t\t\t\t            "),a("p",{attrs:{slot:"content"},slot:"content"},[a("CheckboxGroup",{staticStyle:{"margin-left":"46px"},model:{value:t.social2,callback:function(e){t.social2=e},expression:"social2"}},[a("Checkbox",{attrs:{label:"福利我先知"}},[a("span",[t._v("福利我先知")])]),a("br"),a("br"),t._v(" "),a("Checkbox",{attrs:{label:"好物等你来"}},[a("span",[t._v("好物等你来")])]),a("br"),a("br"),t._v(" "),a("Checkbox",{attrs:{label:"活动抢先看"}},[a("span",[t._v("活动抢先看")])]),a("br"),a("br"),t._v(" "),a("Checkbox",{attrs:{label:"大拿说技术"}},[a("span",[t._v("大拿说技术")])])],1)],1)]),t._v(" "),a("p",{staticStyle:{"margin-left":"40px"}},[t._v("用户管理")]),t._v(" "),a("Panel",{attrs:{name:"3"}},[t._v("\n\t\t\t\t            \t前端浏览\n\t\t\t\t            "),a("p",{attrs:{slot:"content"},slot:"content"},[a("CheckboxGroup",{staticStyle:{"margin-left":"46px"},model:{value:t.social3,callback:function(e){t.social3=e},expression:"social3"}},[a("Checkbox",{attrs:{label:"项目总揽"}},[a("span",[t._v("项目总揽")])]),a("br"),a("br"),t._v(" "),a("Checkbox",{attrs:{label:"本中心项目推进"}},[a("span",[t._v("本中心项目推进")])]),a("br"),a("br"),t._v(" "),a("Checkbox",{attrs:{label:"本中心日报"}},[a("span",[t._v("本中心日报")])]),a("br"),a("br"),t._v(" "),a("Checkbox",{attrs:{label:"本中心半周报"}},[a("span",[t._v("本中心半周报")])]),a("br"),a("br"),t._v(" "),a("Checkbox",{attrs:{label:"本中心上线计划"}},[a("span",[t._v("本中心上线计划")])]),a("br"),a("br"),t._v(" "),a("Checkbox",{attrs:{label:"本中心上线报告"}},[a("span",[t._v("本中心上线报告")])]),a("br"),a("br"),t._v(" "),a("Checkbox",{attrs:{label:"项目推进审核"}},[a("span",[t._v("项目推进审核")])])],1)],1)])],1)]],2)],1)],1)},v=[],g={render:h,staticRenderFns:v},b=g,w=a("C7Lr"),x=r,k=w(f,b,!1,x,"data-v-ebb911bc",null);e.default=k.exports},E1XK:function(t,e,a){"use strict";function r(t){a("hkOw")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("lC5x"),o=a.n(i),s=a("J0Oq"),n=a.n(s),l=a("0jG4"),c=a("L7Pj"),d=a.n(c),p={name:"project_modify",data:function(){return{options3:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},isImportant:"",editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}]]},placeholder:"请填写完成情况！"},single:!1,modalPre:!1,aaa:!1,content:"",defaultList:"",imgName:"",aa:"",overState:"",visible:!1,uploadList:"",formData:{selecttime:"",centerId:null,isImportant:0,projectName:"",workProject:"",workContent:"",overState:"",responsible:"",cooperator:"",timeLimit:"",isRisk:0,riskSituation:"",remark:"无",picture:""},formRule:{selecttime:{required:!0,type:"date",mesasge:"请填写日期",trigger:"change"},centerId:{required:!0},isImportant:{required:!0},projectName:{required:!0,message:"请填写项目名称！",trigger:"blur"},workProject:{required:!0,message:"请填写工作项目！",trigger:"blur"},workContent:{required:!0,message:"请填写工作内容！",trigger:"blur"},overState:{required:!0,message:"请填写完成情况！",trigger:"blur"},responsible:{required:!0,message:"请填写责任人！",trigger:"blur"},cooperator:{required:!0,message:"请填写配合人！",trigger:"blur"},timeLimit:{required:!0,type:"date",message:"请填写完成时限！",trigger:"change"},isRisk:{required:!0},picture:{required:!1},riskSituation:{required:!0,message:"请填写项目风险！",trigger:"blur"}}}},watch:{"formData.isRisk":"setDefaultRisk","formData.leaders":"setDefaultleaser","formData.isFocused":"setDefaultfocus","formData.isImportant":"setDefaultisImportant"},created:function(){this.defaultList=this.formData.picture,this.initData()},mounted:function(){},methods:{preview:function(){d()("#overState").html(this.formData.overState),this.modalPre=!0},stripHtml:function(t){return t=t.replace(/<\/?[^>]*>/g,""),t=t.replace(/[ | ]*\n/g,"\n"),t=t.replace(/\n[\s| | ]*\r/g,"\n"),t=t.replace(/ /gi,"")},initData:function(){var t=this;return n()(o.a.mark(function e(){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.query.id,e.prev=1,e.next=4,l.a.project.getContent({contentId:a});case 4:r=e.sent,console.log(r),t.formData=r,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t.$Message.error("获取数据失败2！");case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},submit:function(){var t=this;return n()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.formData,e.prev=1,e.next=4,l.a.project.saveContent(a);case 4:t.$Message.success("保存成功！"),t.$router.go(-1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.$Message.error("验证失败");case 11:case"end":return e.stop()}},e,t,[[1,8]])}))()},setDefaultRisk:function(){0===this.formData.isRisk&&(this.formData.riskSituation="无")},setDefaultleaser:function(){""!==this.formData.leaders&&(this.single=!0)},setDefaultfocus:function(){0===this.formData.isFocused?this.formData.isFocused="关注":1===this.formData.isFocused&&(this.formData.isFocused="已关注",this.aaa=!0)},handleView:function(t){this.imgName=t,this.visible=!0},handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1)},handleSuccess:function(t,e){e.url=t.data,this.formData.picture=t.data,console.log(this.formData.picture)},handleFormatError:function(t){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+t.name+" is incorrect, please select jpg or png."})},handleMaxSize:function(t){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+t.name+" is too large, no more than 2M."})},handleChange:function(t){this.formData.selecttime=t?new Date(t):""},dateChangea:function(t){this.formData.timeLimit=t?new Date(t):""},setDefaultisImportant:function(){0===this.formData.isImportant?this.isImportant=" ":1===this.formData.isImportant&&(this.isImportant="重点")},handleBeforeUpload:function(){var t=this.uploadList.length<5;return t||this.$Notice.warning({title:"Up to five pictures can be uploaded."}),t}}},u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"ui-toolbar"},[r("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),r("Button",{attrs:{type:"primary",icon:"folder"},on:{click:t.submit}},[t._v("保存")]),t._v(" "),r("Button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:t.preview}},[t._v("预览")])],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"12",offset:"6"}},[r("Form",{ref:"form",attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[r("FormItem",{attrs:{label:"日期：",prop:"selecttime"}},[r("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",value:t.formData.selecttime,placement:"bottom-start",placeholder:"选择日期"},on:{"on-change":t.handleChange}})],1),t._v(" "),r("FormItem",{attrs:{label:"所在中心：",prop:"centerId"}},[r("Select",{attrs:{placeholder:"请选择中心",disabled:""},model:{value:t.formData.centerId,callback:function(e){t.$set(t.formData,"centerId",e)},expression:"formData.centerId"}},t._l(t.$store.state.centers,function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),r("FormItem",{attrs:{label:"重点项目：",prop:"isImportant"}},[r("RadioGroup",{model:{value:t.formData.isImportant,callback:function(e){t.$set(t.formData,"isImportant",e)},expression:"formData.isImportant"}},[r("Radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),r("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),r("FormItem",{attrs:{label:"项目名称：",prop:"projectName"}},[r("Input",{attrs:{placeholder:"请输入项目名称"},model:{value:t.formData.projectName,callback:function(e){t.$set(t.formData,"projectName",e)},expression:"formData.projectName"}})],1),t._v(" "),r("FormItem",{attrs:{label:"工作项目：",prop:"workProject"}},[r("Input",{attrs:{placeholder:"请输入工作项目"},model:{value:t.formData.workProject,callback:function(e){t.$set(t.formData,"workProject",e)},expression:"formData.workProject"}})],1),t._v(" "),r("FormItem",{attrs:{label:"工作内容：",prop:"workContent"}},[r("Input",{attrs:{type:"textarea",placeholder:"请输入工作内容",autosize:{minRows:2}},model:{value:t.formData.workContent,callback:function(e){t.$set(t.formData,"workContent",e)},expression:"formData.workContent"}})],1),t._v(" "),r("FormItem",{attrs:{label:"完成情况：",prop:"overState"}},[r("quill-editor",{staticClass:"quill-editor",attrs:{options:t.editorOption,content:t.formData.overState},model:{value:t.formData.overState,callback:function(e){t.$set(t.formData,"overState",e)},expression:"formData.overState"}})],1),t._v(" "),r("FormItem",{attrs:{label:"缩略图上传：",prop:"picture"}},[[r("Upload",{attrs:{action:"/report/api/pictureUpLoad","on-success":t.handleSuccess,"show-upload-list":!1}},[r("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("缩略图上传")])],1),t._v(" "),""!==t.formData.picture?r("img",{staticStyle:{width:"100px",height:"100px","margin-top":"10px"},attrs:{src:t.formData.picture}}):t._e()]],2),t._v(" "),r("FormItem",{attrs:{label:"责任人：",prop:"responsible"}},[r("Input",{attrs:{placeholder:"请输入责任人"},model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}})],1),t._v(" "),r("FormItem",{attrs:{label:"配合人：",prop:"cooperator"}},[r("Input",{attrs:{placeholder:"请输入配合人"},model:{value:t.formData.cooperator,callback:function(e){t.$set(t.formData,"cooperator",e)},expression:"formData.cooperator"}})],1),t._v(" "),r("FormItem",{attrs:{label:"完成时限：",prop:"timeLimit"}},[r("DatePicker",{staticStyle:{width:"200px"},attrs:{value:t.formData.timeLimit,options:t.options3,placement:"top-start",type:"date",placeholder:"完成时限"},on:{"on-change":t.dateChangea}})],1),t._v(" "),r("FormItem",{attrs:{label:"存在风险：",prop:"isRisk"}},[r("RadioGroup",{model:{value:t.formData.isRisk,callback:function(e){t.$set(t.formData,"isRisk",e)},expression:"formData.isRisk"}},[r("Radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),r("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),r("FormItem",{attrs:{label:"风险情况：",prop:"riskSituation"}},[1===t.formData.isRisk?r("Input",{attrs:{placeholder:"请输入开票回款风险情况"},model:{value:t.formData.riskSituation,callback:function(e){t.$set(t.formData,"riskSituation",e)},expression:"formData.riskSituation"}}):r("Input",{ref:"riskInput",attrs:{disabled:"",placeholder:"请输入开票回款风险情况"},model:{value:t.formData.riskSituation,callback:function(e){t.$set(t.formData,"riskSituation",e)},expression:"formData.riskSituation"}})],1),t._v(" "),r("FormItem",{attrs:{label:"备注：",prop:"remark"}},[r("Input",{attrs:{placeholder:"请输入备注"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1)],1)],1),t._v(" "),r("Modal",{attrs:{title:"预览",width:"296"},model:{value:t.modalPre,callback:function(e){t.modalPre=e},expression:"modalPre"}},[r("Form",{ref:"form",staticStyle:{height:"366px","overflow-y":"scroll"},attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[r("div",{staticStyle:{"border-bottom":"1px solid #eee",position:"relative",width:"100%",margin:"0 auto","box-shadow":"0 5px 15px #eee","border-radius":"12px"}},[r("img",{staticStyle:{width:"18%",float:"right"},attrs:{src:a("VgYa")}}),t._v(" "),r("div",{staticStyle:{padding:"0 12px",width:"90%","line-height":"26px"}},[r("p",{staticStyle:{"font-size":"18px","line-height":"26px"}},[t._v("\n\t\t\t\t\t          "+t._s(t.formData.centerName)+"--"+t._s(t.formData.projectName)+" \n\t\t\t\t\t        ")]),t._v(" "),r("p",{staticStyle:{color:"#999"}},[r("Icon",{attrs:{type:"star"}}),t._v(" "),t.aaa?r("span",{staticStyle:{color:"#EE701E"}},[t._v(t._s(t.formData.isFocused))]):r("span",[t._v(t._s(t.formData.isFocused))]),t._v("\n\t\t\t\t\t        \t    "+t._s(t.isImportant)+"\n\t\t\t\t\t        ")],1),t._v(" "),r("p",{staticStyle:{color:"#999","line-height":"26px","font-size":"9px"}},[t._v(t._s(t.formData.updateTime))])]),t._v(" "),r("div",{staticStyle:{width:"100%",color:"#666666","line-height":"22px",padding:"0 12px",height:"46px",background:"#ECF6FF"}},[r("div",{staticStyle:{color:"#666666",width:"100%"}},[r("span",{staticStyle:{color:"#666666",width:"48%","text-overflow":"ellipsis",float:"left",overflow:"hidden","white-space":"nowrap"}},[t._v("完成时限："+t._s(t.formData.timeLimit))]),r("div",{staticStyle:{float:"right",color:"#666666",width:"48%","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[t._v("所属中心:"),r("span",{staticStyle:{color:"#0084cf"}},[t._v(t._s(t.formData.centerName))])])]),t._v(" "),r("div",{staticStyle:{color:"#666666",width:"100%"}},[r("span",{staticStyle:{color:"#666666",width:"48%","text-overflow":"ellipsis",float:"left",overflow:"hidden","white-space":"nowrap"}},[t._v(" 责任人："+t._s(t.formData.responsible))]),r("div",{staticStyle:{float:"right",color:"#666666",width:"48%","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap",display:"inline-block"}},[t._v(" 配合人："+t._s(t.formData.cooperator))])])])]),t._v(" "),r("div",{staticStyle:{"text-align":"left"}},[r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("工作内容")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.workContent))])])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("完成情况")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"},attrs:{id:"overState"}})])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("开票回款风险")]),t._v(" "),r("div",{class:{redText:"无"!==t.formData.riskSituation},staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.riskSituation))])])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("备注")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.remark))])])])])]),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},m=[],f={render:u,staticRenderFns:m},h=f,v=a("C7Lr"),g=r,b=v(p,h,!1,g,"data-v-028ce2c1",null);e.default=b.exports},JBOh:function(t,e){},KeLZ:function(t,e){},OPVX:function(t,e,a){"use strict";function r(t){a("6bwM")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("lC5x"),o=a.n(i),s=a("J0Oq"),n=a.n(s),l=a("a3Yh"),c=a.n(l),d=a("0jG4"),p=a("aiqZ"),u={components:{quillEditor:p.quillEditor},name:"project_add",data:function(){var t;return t={options3:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}]]},placeholder:"请填写完成情况！",theme:"snow"},a:"0",centerId:"1",daterange:"",imgName:"",single:!1,defaultList:[]},c()(t,"imgName",""),c()(t,"visible",!1),c()(t,"uploadList",[]),c()(t,"formData",{selecttime:"",centerId:null,isImportant:0,projectName:"",workProject:"",workContent:"",overState:"",responsible:"",cooperator:"",timeLimit:"",isRisk:0,riskSituation:"无",remark:"无",leaders:"",picture:""}),c()(t,"formRule",{selecttime:{required:!0,type:"date",message:"请填写日期！",trigger:"change"},uploadImages:{require:!0},centerId:{required:!0},isImportant:{required:!0},projectName:{required:!0,message:"请填写项目名称！",trigger:"blur"},workProject:{required:!0,message:"请填写工作项目！",trigger:"blur"},workContent:{required:!0,message:"请填写工作内容！",trigger:"blur"},overState:{required:!0,message:"请填写完成情况！",trigger:"blur"},responsible:{required:!0,message:"请填写责任人！",trigger:"blur"},cooperator:{required:!0,message:"请填写配合人！",trigger:"blur"},timeLimit:{required:!0,type:"date",message:"请填写完成时限！",trigger:"change"},isRisk:{required:!0},riskSituation:{required:!0,message:"请填写项目风险！",trigger:"change"},picture:{required:!1}}),t},computed:{user:function(){return this.$store.state.user},editor:function(){return this.$refs.myTextEditor.quillEditor}},watch:{"formData.isRisk":"setDefaultRisk","formData.leaders":"setDefaultleaser",user:"initData"},created:function(){this.initData(),this.defaultList=this.formData.picture},mounted:function(){},methods:{initData:function(){this.user&&(this.formData.centerId=this.user.centerId)},submit:function(t){var e=this;this.$refs.form.validate(function(){var t=n()(o.a.mark(function t(a){var r,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return r=e.formData,i=e.$store.state.centers.filter(function(t){return t.id===e.formData.centerId})[0].name,r.billId=e.$route.query.id,r.centerName=i,r.updater=e.$store.state.user.userId,t.next=8,d.a.project.saveContent(r);case 8:e.$Message.success("保存成功！"),e.$router.go(-1),t.next=13;break;case 12:e.$Message.error("验证失败");case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())},setDefaultRisk:function(){0===this.formData.isRisk&&(this.formData.riskSituation="无")},setDefaultleaser:function(){""!==this.formData.leaders&&(this.single=!0)},handleChange:function(t){this.formData.selecttime=t?new Date(t):""},dateChangea:function(t){this.formData.timeLimit=t?new Date(t):""},handleView:function(t){this.imgName=t,this.visible=!0},handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1)},handleSuccess:function(t,e){e.url=t.data,console.log("----"+t.data),this.formData.picture=t.data,console.log(this.formData.picture)},handleFormatError:function(t){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+t.name+" is incorrect, please select jpg or png."})},handleMaxSize:function(t){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+t.name+" is too large, no more than 2M."})},handleBeforeUpload:function(){var t=this.uploadList.length<1;return t||this.$Notice.warning({title:"Up to one pictures can be uploaded."}),t}}},m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),a("Button",{attrs:{type:"primary",icon:"folder"},on:{click:function(e){t.submit("formData")}}},[t._v("保存")])],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12",offset:"6"}},[a("Form",{ref:"form",attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[a("FormItem",{attrs:{label:"日期：",prop:"selecttime"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",value:t.formData.selecttime,placement:"bottom-start",placeholder:"选择日期"},on:{"on-change":t.handleChange}})],1),t._v(" "),a("FormItem",{attrs:{label:"所在中心：",prop:"centerId"}},[a("Select",{attrs:{placeholder:"请选择中心"},model:{value:t.formData.centerId,callback:function(e){t.$set(t.formData,"centerId",e)},expression:"formData.centerId"}},t._l(t.$store.state.centers,function(e){return a("Option",{key:e.id,attrs:{disabled:"",value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"重点项目：",prop:"isImportant"}},[a("RadioGroup",{model:{value:t.formData.isImportant,callback:function(e){t.$set(t.formData,"isImportant",e)},expression:"formData.isImportant"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"项目名称：",prop:"projectName"}},[a("Input",{attrs:{placeholder:"请输入项目名称"},model:{value:t.formData.projectName,callback:function(e){t.$set(t.formData,"projectName",e)},expression:"formData.projectName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"工作项目：",prop:"workProject"}},[a("Input",{attrs:{placeholder:"请输入工作项目"},model:{value:t.formData.workProject,callback:function(e){t.$set(t.formData,"workProject",e)},expression:"formData.workProject"}})],1),t._v(" "),a("FormItem",{attrs:{label:"工作内容：",prop:"workContent"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入工作内容",autosize:{minRows:2}},model:{value:t.formData.workContent,callback:function(e){t.$set(t.formData,"workContent",e)},expression:"formData.workContent"}})],1),t._v(" "),a("FormItem",{attrs:{label:"完成情况：",prop:"overState"}},[a("quill-editor",{staticClass:"quill-editor",attrs:{options:t.editorOption,content:t.formData.overState},model:{value:t.formData.overState,callback:function(e){t.$set(t.formData,"overState",e)},expression:"formData.overState"}})],1),t._v(" "),a("FormItem",{attrs:{label:"缩略图上传：",prop:"picture"}},[[a("Upload",{attrs:{action:"/report/api/pictureUpLoad","on-success":t.handleSuccess,"show-upload-list":!1}},[a("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("缩略图上传")])],1),t._v(" "),""!==t.formData.picture?a("img",{staticStyle:{width:"100px",height:"100px","margin-top":"10px"},attrs:{src:t.formData.picture}}):t._e()]],2),t._v(" "),a("FormItem",{attrs:{label:"责任人：",prop:"responsible"}},[a("Input",{attrs:{placeholder:"请输入责任人"},model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}})],1),t._v(" "),a("FormItem",{attrs:{label:"配合人：",prop:"cooperator"}},[a("Input",{attrs:{placeholder:"请输入配合人"},model:{value:t.formData.cooperator,callback:function(e){t.$set(t.formData,"cooperator",e)},expression:"formData.cooperator"}})],1),t._v(" "),a("FormItem",{attrs:{label:"完成时限：",prop:"timeLimit"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{value:t.formData.timeLimit,options:t.options3,placement:"top-start",type:"date",placeholder:"完成时限"},on:{"on-change":t.dateChangea}})],1),t._v(" "),a("FormItem",{attrs:{label:"存在风险：",prop:"isRisk"}},[a("RadioGroup",{model:{value:t.formData.isRisk,callback:function(e){t.$set(t.formData,"isRisk",e)},expression:"formData.isRisk"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"风险情况：",prop:"riskSituation"}},[1===t.formData.isRisk?a("Input",{attrs:{placeholder:"请输入开票回款风险情况"},model:{value:t.formData.riskSituation,callback:function(e){t.$set(t.formData,"riskSituation",e)},expression:"formData.riskSituation"}}):a("Input",{ref:"riskInput",attrs:{disabled:"",placeholder:"请输入开票回款风险情况"},model:{value:t.formData.riskSituation,callback:function(e){t.$set(t.formData,"riskSituation",e)},expression:"formData.riskSituation"}})],1),t._v(" "),a("FormItem",{attrs:{label:"备注：",prop:"remark"}},[a("Input",{attrs:{placeholder:"请输入备注"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1)],1)],1)],1)},f=[],h={render:m,staticRenderFns:f},v=h,g=a("C7Lr"),b=r,w=g(u,v,!1,b,"data-v-32bcbe47",null);e.default=w.exports},TVmB:function(t,e,a){"use strict";function r(t){a("2gfQ")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("3cXf"),o=a.n(i),s=a("lC5x"),n=a.n(s),l=a("J0Oq"),c=a.n(l),d=a("0xDb"),p=a("0jG4"),u=(a("Du/2"),a("L7Pj")),m=a.n(u),f=function(){var t=new Date;return t.setMonth(t.getMonth()-1),t},h={name:"manageList",desc:"组织权限",data:function(){var t=this;return{pageCount:"",aaa:!1,isImportant:"",centerId:"",tableHeight:450,modalPre:!1,projectList:[],model1:"",loading:!1,aaaaa:143434,daterange:[],overState:"",options:{disabledDate:function(t){return t&&t.getTime()>Date.now()},date:f()},data1:[],formData:{updateTime:"",centerId:null,isImportant:0,projectName:"",workProject:"",workContent:"",overState:"",responsible:"",cooperator:"",timeLimit:"",isRisk:0,riskSituation:"",remark:"无",leaders:""},formRule:{updateTime:{required:!0},centerId:{required:!0},isImportant:{required:!0},projectName:{required:!0,message:"请填写项目名称！",trigger:"blur"},workProject:{required:!0,message:"请填写工作项目！",trigger:"blur"},workContent:{required:!0,message:"请填写工作内容！",trigger:"blur"},overState:{required:!0,message:"请填写完成情况！",trigger:"blur"},responsible:{required:!0,message:"请填写责任人！",trigger:"blur"},cooperator:{required:!0,message:"请填写配合人！",trigger:"blur"},timeLimit:{required:!0,message:"请填写完成时限！",trigger:"blur"},isRisk:{required:!0},riskSituation:{required:!0,message:"请填写项目风险！",trigger:"blur"},leaders:{required:!0,message:"@领导人为空！",trigger:"blur"}},columns4:[{title:"部门",key:"department",width:100,align:"center"},{title:"中心",key:"center",width:110,align:"center"},{title:"姓名",width:80,key:"name",className:"Newheightname",align:"center"},{title:"账号",key:"account",align:"center",width:120},{title:"权限角色",key:"roles.roleName",align:"center",width:100},{title:"状态",key:"userPermissionInfo",width:80,align:"center",render:function(t,e){switch(e.row.isPublish){case 0:return t("span","草稿");case 1:return t("span","发布")}}},{title:"操作",align:"center",render:function(e,a){var r=d.a.localStorage.getUser(),i=e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$router.push({name:"manage_modify",query:{name:a.row.name}})}}},"修改"),o=e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.delModal=!0,t.account=a.row.account}}},"删除"),s=e("Button",{props:{type:"warning",size:"small"},on:{click:function(){var e={title:"重置密码",content:"确定「 "+a.row.name+" 」密码重置吗?",width:360,onOk:function(){function t(){return e.apply(this,arguments)}var e=c()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=d.a.localStorage.getToken(),t.prev=1,t.next=4,p.a.permissions.resetPasswordByAccount({account:a.row.account,jwtToken:e});case 4:this.$Message.success("已重置密码！"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this.$Message.error(t.t0.message);case 10:case"end":return t.stop()}},t,this,[[1,7]])}));return t}()};t.$Modal.confirm(e)}}},"重置密码"),l=e("Button",{props:{type:"success",size:"small"},on:{click:function(){var e={title:"发布",content:"确定要发布「 "+a.row.projectName+" 」吗?",width:350,onOk:function(){function t(){return e.apply(this,arguments)}var e=c()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.project.publishContentsNew({contentId:a.row.contentId});case 3:this.$Message.success("发布成功！"),a.row.isPublish=1,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),this.$Message.error("操作失败!");case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return t}()};t.$Modal.confirm(e)}}},"发布");return 1===a.row.isPublish?e("div",[i,s]):1===r.role?e("div",[i,o,s]):2===r.role?e("div",[i,l]):void 0}}],tableData:[],centerData:[],selectionDataList:[],total:0,pageIndex:1,pageSize:10,delModal:!1,pubModal:!1,contentId:"",structrue:"",structrueId:"",structureName:"",keyword:"",account:""}},created:function(){this.manage(),this.queryUserPermissionListing()},mounted:function(){var t=d.a.localStorage.getUser();this.centerId=t.center},watch:{"formData.isFocused":"setDefaultfocus","formData.isImportant":"setDefaultisImportant"},computed:{user:function(){return this.$store.state.user}},methods:{a:function(t){var e=this.$refs.tree4.getSelectedNodes(),a=o()(e);console.log(a),this.structrue=e[0].parent_id,this.structureName=e[0].title,console.log(this.structrue),console.log(this.structureName)},downloadModel:function(){console.log("下载文件"),window.location.href="/csreport/api/exportBatchResult"},addStructure:function(){var t=this;return c()(n.a.mark(function e(){var a,r,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.a.localStorage.getToken(),e.prev=1,r={structureId:1,structureName:"新增",jwtToken:a},e.next=5,p.a.userManage.addStructure(r);case 5:i=e.sent,t.$Message.success("success"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.$Message.error(e.t0.message);case 12:case"end":return e.stop()}},e,t,[[1,9]])}))()},updateStructureName:function(){var t=this;return c()(n.a.mark(function e(){var a,r,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.a.localStorage.getToken(),e.prev=1,r={structureId:t.structrue,structureName:t.structureName,jwtToken:a},e.next=5,p.a.userManage.updateStructureName(r);case 5:i=e.sent,t.$Message.success("success"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.$Message.error(e.t0.message);case 12:case"end":return e.stop()}},e,t,[[1,9]])}))()},deleteStructureNameById:function(){var t=this;return c()(n.a.mark(function e(){var a,r,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.a.localStorage.getToken(),e.prev=1,r={structureId:t.structrue,jwtToken:a},e.next=5,p.a.userManage.deleteStructureNameById(r);case 5:i=e.sent,t.$Message.success("success"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.$Message.error(e.t0.message);case 12:case"end":return e.stop()}},e,t,[[1,9]])}))()},queryUserPermissionListing:function(t){var e=this;return c()(n.a.mark(function a(){var r,i,o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t&&(e.pageIndex=t),r=d.a.localStorage.getToken(),a.prev=2,e.loading=!0,i={pageIndex:e.pageIndex,pageSize:e.pageSize,jwtToken:r},a.next=7,p.a.permissions.queryUserPermissionListing(i);case 7:o=a.sent,e.tableData=o.list,e.total=o.reultAllCount,a.next=15;break;case 12:a.prev=12,a.t0=a.catch(2),e.$Message.error(a.t0.message);case 15:return a.prev=15,e.loading=!1,a.finish(15);case 18:case"end":return a.stop()}},a,e,[[2,12,15,18]])}))()},uploadSuccess:function(t,e){console.log(t),0===t.code?(this.$Message.success("导入成功"),this.getDataList()):(this.$Message.error(t.desc),this.$refs.uploadContent.clearFiles())},queryUserPermissionBycontent:function(){var t=this;return c()(n.a.mark(function e(){var a,r,i,o,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.a.localStorage.getUser(),r=a.name,i=d.a.localStorage.getToken(),e.prev=3,o={jwtToken:i,content:keyword},e.next=7,p.a.permissions.queryUserPermissionBycontent(o);case 7:s=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t.$Message.error("获取数据失败！");case 13:case"end":return e.stop()}},e,t,[[3,10]])}))()},manage:function(){var t=this;return c()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.userManage.findAll();case 3:a=e.sent,t.data1=a,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.$Message.error(e.t0.message);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},tableSelect:function(t){this.selectionDataList=t},pubMsg:function(){var t=this;if(this.selectionDataList.length<1)return this.$Message.info("请选择要发布的信息"),!1;var e=!1,a=d.a.localStorage.getUser();this.selectionDataList.forEach(function(r,i){1!==a.role?(e=!0,t.pubModal=!0):t.$Message.info("您没有发布权限")})},pubOk:function(){var t=this;return c()(n.a.mark(function e(){var a,r,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.selectionDataList.forEach(function(t,e){a.push(t.contentId)}),r={contentId:a.join(",")+","},e.prev=3,e.next=6,p.a.project.ispublishContentsNew(r);case 6:if(i=e.sent,console.log(i.code),0!=i.code){e.next=22;break}return e.prev=9,e.next=12,p.a.project.publishContentsNew(r);case 12:t.$Message.success("发布成功！"),t.isPublish=1,t.getDataList(1),t.selectionDataList=[],e.next=22;break;case 18:e.prev=18,e.t0=e.catch(9),console.log("------------》e"),t.$Message.error("操作失败!");case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(3),t.$Message.error("存在已发布！");case 27:case"end":return e.stop()}},e,t,[[3,24],[9,18]])}))()},delOk:function(){var t=this;return c()(n.a.mark(function e(){var a,r,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=d.a.localStorage.getToken(),r={account:t.account,jwtToken:a},e.next=5,p.a.permissions.deleteUserPermission(r);case 5:i=e.sent,t.queryUserPermissionListing(1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.$Message.error(e.t0.message);case 12:case"end":return e.stop()}},e,t,[[0,9]])}))()},add:function(){this.$router.push({name:"manageadd",query:this.$route.query})},search:function(){this.queryUserPermissionListing(1)},getAllCenterNew:function(){var t=this;return c()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,p.a.project.getAllCenterNew();case 4:a=e.sent,t.projectList=a,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.$Message.info("获取失败");case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case"end":return e.stop()}},e,t,[[0,8,11,14]])}))()},getstr:function(t){return m()("#overStatea").html(t)},dateChange:function(t){this.daterange=t},getList:function(t){this.$refs.selection;this.selectionDataList=t}}},v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"ui-toolbar"},[t.$store.state.user&&1===t.$store.state.user.role?r("Button",{attrs:{type:"primary",icon:"android-add"},on:{click:t.add}},[t._v("新增")]):t._e(),t._v(" "),t.$store.state.user&&1===t.$store.state.user.role?r("span",{staticStyle:{"margin-left":"36px"}}):t._e(),t._v(" "),[t.$store.state.user&&1===t.$store.state.user.role?r("i-input",{staticStyle:{width:"160px"},attrs:{placeholder:"输入姓名或账号"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}):t._e()],t._v(" "),r("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.search}},[t._v("查询")])],2),t._v(" "),r("div",{staticClass:"pull-right"},[t.$store.state.user&&2===t.$store.state.user.role?r("Button",{attrs:{type:"primary"},on:{click:t.pubMsg}},[t._v("发布")]):t._e()],1),t._v(" "),r("Table",{ref:"selection",attrs:{border:"","width:ng-class-odd":"",columns:t.columns4,data:t.tableData,loading:t.loading},on:{"on-selection-change":t.tableSelect}}),t._v(" "),r("appPage",{attrs:{total:t.total,"show-elevator":"",pageIndex:t.pageIndex,pageSize:t.pageSize},on:{pageChange:t.queryUserPermissionListing}})],1),t._v(" "),r("Modal",{attrs:{width:"350"},on:{"on-ok":t.delOk},model:{value:t.delModal,callback:function(e){t.delModal=e},expression:"delModal"}},[r("p",{staticStyle:{"text-align":"center","padding-top":"20px","font-size":"15px"}},[t._v("您确定要删除所选的用户角色信息吗？")])]),t._v(" "),r("Modal",{attrs:{width:"350"},on:{"on-ok":t.pubOk},model:{value:t.pubModal,callback:function(e){t.pubModal=e},expression:"pubModal"}},[r("p",{staticStyle:{"text-align":"center","padding-top":"20px","font-size":"15px"}},[t._v("您确定要发布所选的用户角色信息吗？")])]),t._v(" "),r("Modal",{attrs:{title:"预览",width:"296"},model:{value:t.modalPre,callback:function(e){t.modalPre=e},expression:"modalPre"}},[r("Form",{ref:"form",staticStyle:{height:"366px","overflow-y":"scroll"},attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[r("div",{staticStyle:{"border-bottom":"1px solid #eee",position:"relative",width:"100%",margin:"0 auto","box-shadow":"0 5px 15px #eee","border-radius":"12px"}},[r("img",{staticStyle:{width:"18%",float:"right"},attrs:{src:a("VgYa")}}),t._v(" "),r("div",{staticStyle:{padding:"0 12px",width:"90%","line-height":"26px"}},[r("p",{staticStyle:{"font-size":"18px","line-height":"26px"}},[t._v("\n\t\t\t\t\t          "+t._s(t.formData.centerName)+"--"+t._s(t.formData.projectName)+" \n\t\t\t\t\t        ")]),t._v(" "),r("p",{staticStyle:{color:"#999"}},[r("Icon",{attrs:{type:"star"}}),t._v(" "),t.aaa?r("span",{staticStyle:{color:"#EE701E"}},[t._v(t._s(t.formData.isFocused))]):r("span",[t._v(t._s(t.formData.isFocused))]),t._v("\n\t\t\t\t\t        \t    "+t._s(t.isImportant)+"\n\t\t\t\t\t        ")],1),t._v(" "),r("p",{staticStyle:{color:"#999","line-height":"26px","font-size":"9px"}},[t._v(t._s(t.formData.updateTime))])]),t._v(" "),r("div",{staticStyle:{width:"100%",color:"#666666","line-height":"22px",padding:"0 12px",height:"46px",background:"#ECF6FF"}},[r("div",{staticStyle:{color:"#666666",width:"100%"}},[r("span",{staticStyle:{color:"#666666",width:"48%","text-overflow":"ellipsis",float:"left",overflow:"hidden","white-space":"nowrap"}},[t._v("完成时限："+t._s(t.formData.timeLimit))]),r("div",{staticStyle:{float:"right",color:"#666666",width:"48%","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[t._v("所属中心:"),r("span",{staticStyle:{color:"#0084cf"}},[t._v(t._s(t.formData.centerName))])])]),t._v(" "),r("div",{staticStyle:{color:"#666666",width:"100%"}},[r("span",{staticStyle:{color:"#666666",width:"48%","text-overflow":"ellipsis",float:"left",overflow:"hidden","white-space":"nowrap"}},[t._v(" 责任人："+t._s(t.formData.responsible))]),r("div",{staticStyle:{float:"right",color:"#666666",width:"48%","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap",display:"inline-block"}},[t._v(" 配合人："+t._s(t.formData.cooperator))])])])]),t._v(" "),r("div",{staticStyle:{"text-align":"left"}},[r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("工作内容")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.workContent))])])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("完成情况")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"},attrs:{id:"overState"}})])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("开票回款风险")]),t._v(" "),r("div",{class:{redText:"无"!==t.formData.riskSituation},staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.riskSituation))])])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("备注")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.remark))])])])])]),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},g=[],b={render:v,staticRenderFns:g},w=b,x=a("C7Lr"),k=r,_=x(h,w,!1,k,"data-v-46487b1c",null);e.default=_.exports},VgYa:function(t,e,a){t.exports=a.p+"static/img/tuijin.6de85ce.png"},Zbdj:function(t,e){},h2JB:function(t,e,a){"use strict";function r(t){a("t4A7")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("lC5x"),o=a.n(i),s=a("J0Oq"),n=a.n(s),l=a("0jG4"),c=a("L7Pj"),d=a.n(c),p={name:"project_template",data:function(){return{options3:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},isImportant:"",editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}]]},placeholder:"请填写完成情况！"},single:!1,modalPre:!1,aaa:!1,content:"",defaultList:"",imgName:"",aa:"",overState:"",visible:!1,uploadList:"",formData:{selecttime:"",centerId:null,isImportant:0,projectName:"",workProject:"",workContent:"",overState:"",responsible:"",cooperator:"",timeLimit:"",isRisk:0,riskSituation:"",remark:"无",picture:""},formRule:{selecttime:{required:!0,type:"date",mesasge:"请填写日期",trigger:"change"},centerId:{required:!0},isImportant:{required:!0},projectName:{required:!0,message:"请填写项目名称！",trigger:"blur"},workProject:{required:!0,message:"请填写工作项目！",trigger:"blur"},workContent:{required:!0,message:"请填写工作内容！",trigger:"blur"},overState:{required:!0,message:"请填写完成情况！",trigger:"blur"},responsible:{required:!0,message:"请填写责任人！",trigger:"blur"},cooperator:{required:!0,message:"请填写配合人！",trigger:"blur"},timeLimit:{required:!0,type:"date",message:"请填写完成时限！",trigger:"change"},isRisk:{required:!0},picture:{required:!1},riskSituation:{required:!0,message:"请填写项目风险！",trigger:"blur"}}}},watch:{"formData.isRisk":"setDefaultRisk","formData.leaders":"setDefaultleaser","formData.isFocused":"setDefaultfocus","formData.isImportant":"setDefaultisImportant"},created:function(){this.defaultList=this.formData.picture,this.initData()},mounted:function(){},methods:{preview:function(){d()("#overState").html(this.formData.overState),this.modalPre=!0},stripHtml:function(t){return t=t.replace(/<\/?[^>]*>/g,""),t=t.replace(/[ | ]*\n/g,"\n"),t=t.replace(/\n[\s| | ]*\r/g,"\n"),t=t.replace(/ /gi,"")},initData:function(){var t=this;return n()(o.a.mark(function e(){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.query.id,e.prev=1,e.next=4,l.a.project.getContent({contentId:a});case 4:r=e.sent,console.log(r),t.formData=r,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t.$Message.error("获取数据失败2！");case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},submit:function(){var t=this;return n()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.formData,e.prev=1,e.next=4,l.a.project.saveContentTemplate(a);case 4:t.$Message.success("保存成功！"),t.$router.go(-1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.$Message.error("验证失败");case 11:case"end":return e.stop()}},e,t,[[1,8]])}))()},setDefaultRisk:function(){0===this.formData.isRisk&&(this.formData.riskSituation="无")},setDefaultleaser:function(){""!==this.formData.leaders&&(this.single=!0)},setDefaultfocus:function(){0===this.formData.isFocused?this.formData.isFocused="关注":1===this.formData.isFocused&&(this.formData.isFocused="已关注",this.aaa=!0)},setDefaultisImportant:function(){0===this.formData.isImportant?this.isImportant=" ":1===this.formData.isImportant&&(this.isImportant="重点")},handleView:function(t){this.imgName=t,this.visible=!0},handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1)},handleSuccess:function(t,e){e.url=t.data,this.formData.picture=t.data,console.log(this.formData.picture)},handleFormatError:function(t){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+t.name+" is incorrect, please select jpg or png."})},handleMaxSize:function(t){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+t.name+" is too large, no more than 2M."})},handleChange:function(t){this.formData.selecttime=t?new Date(t):""},dateChangea:function(t){this.formData.timeLimit=t?new Date(t):""},handleBeforeUpload:function(){var t=this.uploadList.length<5;return t||this.$Notice.warning({title:"Up to five pictures can be uploaded."}),t}}},u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"ui-toolbar"},[r("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),r("Button",{attrs:{type:"primary",icon:"folder"},on:{click:t.submit}},[t._v("保存")]),t._v(" "),r("Button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:t.preview}},[t._v("预览")])],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"12",offset:"6"}},[r("Form",{ref:"form",attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[r("FormItem",{attrs:{label:"日期：",prop:"selecttime"}},[r("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",value:t.formData.selecttime,placement:"bottom-start",placeholder:"选择日期"},on:{"on-change":t.handleChange}})],1),t._v(" "),r("FormItem",{attrs:{label:"所在中心：",prop:"centerId"}},[r("Select",{attrs:{placeholder:"请选择中心",disabled:""},model:{value:t.formData.centerId,callback:function(e){t.$set(t.formData,"centerId",e)},expression:"formData.centerId"}},t._l(t.$store.state.centers,function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),r("FormItem",{attrs:{label:"重点项目：",prop:"isImportant"}},[r("RadioGroup",{model:{value:t.formData.isImportant,callback:function(e){t.$set(t.formData,"isImportant",e)},expression:"formData.isImportant"}},[r("Radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),r("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),r("FormItem",{attrs:{label:"项目名称：",prop:"projectName"}},[r("Input",{attrs:{placeholder:"请输入项目名称"},model:{value:t.formData.projectName,callback:function(e){t.$set(t.formData,"projectName",e)},expression:"formData.projectName"}})],1),t._v(" "),r("FormItem",{attrs:{label:"工作项目：",prop:"workProject"}},[r("Input",{attrs:{placeholder:"请输入工作项目"},model:{value:t.formData.workProject,callback:function(e){t.$set(t.formData,"workProject",e)},expression:"formData.workProject"}})],1),t._v(" "),r("FormItem",{attrs:{label:"工作内容：",prop:"workContent"}},[r("Input",{attrs:{type:"textarea",placeholder:"请输入工作内容",autosize:{minRows:2}},model:{value:t.formData.workContent,callback:function(e){t.$set(t.formData,"workContent",e)},expression:"formData.workContent"}})],1),t._v(" "),r("FormItem",{attrs:{label:"完成情况：",prop:"overState"}},[r("quill-editor",{staticClass:"quill-editor",attrs:{options:t.editorOption,content:t.formData.overState},model:{value:t.formData.overState,callback:function(e){t.$set(t.formData,"overState",e)},expression:"formData.overState"}})],1),t._v(" "),r("FormItem",{attrs:{label:"缩略图上传：",prop:"picture"}},[[r("Upload",{attrs:{action:"/report/api/pictureUpLoad","on-success":t.handleSuccess,"show-upload-list":!1}},[r("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("缩略图上传")])],1),t._v(" "),""!==t.formData.picture?r("img",{staticStyle:{width:"100px",height:"100px","margin-top":"10px"},attrs:{src:t.formData.picture}}):t._e()]],2),t._v(" "),r("FormItem",{attrs:{label:"责任人：",prop:"responsible"}},[r("Input",{attrs:{placeholder:"请输入责任人"},model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}})],1),t._v(" "),r("FormItem",{attrs:{label:"配合人：",prop:"cooperator"}},[r("Input",{attrs:{placeholder:"请输入配合人"},model:{value:t.formData.cooperator,callback:function(e){t.$set(t.formData,"cooperator",e)},expression:"formData.cooperator"}})],1),t._v(" "),r("FormItem",{attrs:{label:"完成时限：",prop:"timeLimit"}},[r("DatePicker",{staticStyle:{width:"200px"},attrs:{value:t.formData.timeLimit,options:t.options3,placement:"top-start",type:"date",placeholder:"完成时限"},on:{"on-change":t.dateChangea}})],1),t._v(" "),r("FormItem",{attrs:{label:"存在风险：",prop:"isRisk"}},[r("RadioGroup",{model:{value:t.formData.isRisk,callback:function(e){t.$set(t.formData,"isRisk",e)},expression:"formData.isRisk"}},[r("Radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),r("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),r("FormItem",{attrs:{label:"风险情况：",prop:"riskSituation"}},[1===t.formData.isRisk?r("Input",{attrs:{placeholder:"请输入开票回款风险情况"},model:{value:t.formData.riskSituation,callback:function(e){t.$set(t.formData,"riskSituation",e)},expression:"formData.riskSituation"}}):r("Input",{ref:"riskInput",attrs:{disabled:"",placeholder:"请输入开票回款风险情况"},model:{value:t.formData.riskSituation,callback:function(e){t.$set(t.formData,"riskSituation",e)},expression:"formData.riskSituation"}})],1),t._v(" "),r("FormItem",{attrs:{label:"备注：",prop:"remark"}},[r("Input",{attrs:{placeholder:"请输入备注"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1)],1)],1),t._v(" "),r("Modal",{attrs:{title:"预览",width:"296"},model:{value:t.modalPre,callback:function(e){t.modalPre=e},expression:"modalPre"}},[r("Form",{ref:"form",staticStyle:{height:"366px","overflow-y":"scroll"},attrs:{model:t.formData,rules:t.formRule,"label-width":100}},[r("div",{staticStyle:{"border-bottom":"1px solid #eee",position:"relative",width:"100%",margin:"0 auto","box-shadow":"0 5px 15px #eee","border-radius":"12px"}},[r("img",{staticStyle:{width:"18%",float:"right"},attrs:{src:a("VgYa")}}),t._v(" "),r("div",{staticStyle:{padding:"0 12px",width:"90%","line-height":"26px"}},[r("p",{staticStyle:{"font-size":"18px","line-height":"26px"}},[t._v("\n\t\t\t\t\t          "+t._s(t.formData.centerName)+"--"+t._s(t.formData.projectName)+" \n\t\t\t\t\t        ")]),t._v(" "),r("p",{staticStyle:{color:"#999"}},[r("Icon",{attrs:{type:"star"}}),t._v(" "),t.aaa?r("span",{staticStyle:{color:"#EE701E"}},[t._v(t._s(t.formData.isFocused))]):r("span",[t._v(t._s(t.formData.isFocused))]),t._v("\n\t\t\t\t\t        \t    "+t._s(t.isImportant)+"\n\t\t\t\t\t        ")],1),t._v(" "),r("p",{staticStyle:{color:"#999","line-height":"26px","font-size":"9px"}},[t._v(t._s(t.formData.updateTime))])]),t._v(" "),r("div",{staticStyle:{width:"100%",color:"#666666","line-height":"22px",padding:"0 12px",height:"46px",background:"#ECF6FF"}},[r("div",{staticStyle:{color:"#666666",width:"100%"}},[r("span",{staticStyle:{color:"#666666",width:"48%","text-overflow":"ellipsis",float:"left",overflow:"hidden","white-space":"nowrap"}},[t._v("完成时限："+t._s(t.formData.timeLimit))]),r("div",{staticStyle:{float:"right",color:"#666666",width:"48%","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[t._v("所属中心:"),r("span",{staticStyle:{color:"#0084cf"}},[t._v(t._s(t.formData.centerName))])])]),t._v(" "),r("div",{staticStyle:{color:"#666666",width:"100%"}},[r("span",{staticStyle:{color:"#666666",width:"48%","text-overflow":"ellipsis",float:"left",overflow:"hidden","white-space":"nowrap"}},[t._v(" 责任人："+t._s(t.formData.responsible))]),r("div",{staticStyle:{float:"right",color:"#666666",width:"48%","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap",display:"inline-block"}},[t._v(" 配合人："+t._s(t.formData.cooperator))])])])]),t._v(" "),r("div",{staticStyle:{"text-align":"left"}},[r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("工作内容")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.workContent))])])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("完成情况")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"},attrs:{id:"overState"}})])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("开票回款风险")]),t._v(" "),r("div",{class:{redText:"无"!==t.formData.riskSituation},staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.riskSituation))])])]),t._v(" "),r("div",{staticStyle:{width:"100%"}},[r("div",{staticStyle:{width:"6%","margin-top":"12px","vertical-align":"top",display:"inline-block"}},[r("img",{attrs:{src:a("4vbo")}})]),t._v(" "),r("div",{staticStyle:{width:"92%",display:"inline-block","margin-top":"12px",border:"1px solid #eee"}},[r("p",{staticClass:"label",staticStyle:{width:"100%","font-weight":"bold",padding:"0 12px",height:"22px","line-height":"22px",background:"#eee"}},[t._v("备注")]),t._v(" "),r("div",{staticStyle:{width:"100%",padding:"0 12px"}},[t._v(t._s(t.formData.remark))])])])])]),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},m=[],f={render:u,staticRenderFns:m},h=f,v=a("C7Lr"),g=r,b=v(p,h,!1,g,"data-v-f15daf26",null);e.default=b.exports},hkOw:function(t,e){},j6Nz:function(t,e){},lcIY:function(t,e,a){"use strict";function r(t){a("j6Nz")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("lC5x"),o=a.n(i),s=a("J0Oq"),n=a.n(s),l=a("0jG4"),c=a("0xDb"),d={data:function(){return{title:"",panelId:"",projectList:[],loading:!1,token:null,billId:null}},created:function(){this.getProjectContent(),this.token=c.a.localStorage.getToken(),this.billId=this.$route.query.id},watch:{projectList:"openDefaultPanel"},methods:{getProjectContent:function(){var t=this;return n()(o.a.mark(function e(){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.query.id,e.prev=1,t.loading=!0,e.next=5,l.a.project.getProjectContent({billId:a});case 5:r=e.sent,t.title=r.title,t.projectList=r.data.list,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.$Message.error("获取数据失败！");case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}},e,t,[[1,10,13,16]])}))()},add:function(){this.$router.push({name:"projectAdd",query:this.$route.query})},modify:function(t){this.$router.push({name:"projectModify",query:{id:t}})},publishBill:function(){var t=this;return n()(o.a.mark(function e(){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.query.id,e.prev=1,e.next=4,l.a.project.publishBill({billId:a});case 4:r=e.sent,console.log(r),t.$Message.success("发布成功！"),t.$router.go(-1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t.$Message.error("操作失败!");case 14:case"end":return e.stop()}},e,t,[[1,10]])}))()},del:function(t){var e=this;return n()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l.a.project.deleteContent({contentId:t});case 3:e.projectList=e.projectList.filter(function(e){return e.contentId!==t}),a.next=10;break;case 6:a.prev=6,a.t0=a.catch(0),console.log(a.t0),e.$Message.error("操作失败！");case 10:case"end":return a.stop()}},a,e,[[0,6]])}))()},openDefaultPanel:function(){0!==this.projectList.length&&this.$nextTick(function(){this.panelId=String(this.projectList[0].contentId)})},downloadModel:function(){console.log("下载文件"),window.location.href="/report/api/exportBatchResult"},uploadSuccess:function(t,e){0===t.data.code?this.$Message.success("导入成功"):this.$Message.error("导入失败")}}},p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-toolbar"},[a("Button",{attrs:{type:"default",icon:"ios-arrow-back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),t.$store.state.user&&1===t.$store.state.user.role?a("Button",{attrs:{type:"primary",icon:"android-add"},on:{click:t.add}},[t._v("新增")]):t._e(),t._v(" "),t.$store.state.user&&2===t.$store.state.user.role?a("Button",{attrs:{type:"success",icon:"android-cloud-done"},on:{click:t.publishBill}},[t._v("发布")]):t._e(),t._v(" "),a("div",{staticClass:"pull-right"},[a("Button",{attrs:{type:"info",icon:"android-download"},on:{click:t.downloadModel}},[t._v("下载")]),t._v(" "),a("Upload",{attrs:{action:"/report/api/imporBatchRecharge",headers:{jwtToken:t.token},data:{billId:t.billId},name:"file",accept:"application/vnd.ms-excel"},on:{"on-succcess":t.uploadSuccess}},[a("Button",{staticClass:"upload",attrs:{type:"info",icon:"ios-cloud-upload-outline"},on:{"on-success":t.uploadSuccess}},[t._v("导入")])],1)],1)],1),t._v(" "),a("h3",{staticClass:"mb10"},[t._v(t._s(t.title))]),t._v(" "),t.loading?a("div",{staticClass:"loading"},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),a("div",[t._v("Loading")])],1)],1):0===t.projectList.length?a("div",[t._v("\n    暂无数据\n  ")]):a("Collapse",{attrs:{accordion:""},model:{value:t.panelId,callback:function(e){t.panelId=e},expression:"panelId"}},t._l(t.projectList,function(e,r){return a("Panel",{key:e.contentId,attrs:{name:String(e.contentId)}},[a("p",{staticClass:"ellipsis",staticStyle:{width:"100%",float:"right","margin-left":"-5px","padding-left":"8px","padding-right":"130px"}},[1===e.isImportant?a("Icon",{staticClass:"icon",staticStyle:{color:"gold"},attrs:{type:"ios-star"}}):t._e(),t._v(" "),1===e.isRisk?a("Icon",{staticClass:"icon",staticStyle:{color:"red"},attrs:{type:"alert-circled"}}):t._e(),t._v("\n        "+t._s(e.centerName)+": "+t._s(e.projectName)+" - "+t._s(e.workProject)+"\n      ")],1),t._v(" "),a("ButtonGroup",{staticClass:"modify",attrs:{size:"small"}},[a("Button",{attrs:{type:"warning",icon:"edit"},on:{click:function(a){a.stopPropagation(),t.modify(e.contentId)}}},[t._v("修改")]),t._v(" "),a("Button",{attrs:{type:"error",icon:"ios-trash"},on:{click:function(a){a.stopPropagation(),t.del(e.contentId)}}},[t._v("删除")])],1),t._v(" "),a("p",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[a("b",{staticClass:"label"},[t._v("工作项目：")]),t._v(t._s(e.workProject)+"\n        "),a("b",{staticClass:"label"},[t._v("工作内容：")]),t._v("\n        "+t._s(e.workContent)+"\n        "),a("b",{staticClass:"label"},[t._v("完成情况：")]),t._v("\n        "+t._s(e.overState)+"\n        "),a("b",{staticClass:"label"},[t._v("责任人：")]),t._v(t._s(e.responsible)+"\n        "),a("b",{staticClass:"label"},[t._v("配合人：")]),t._v(t._s(e.cooperator)+"\n        "),a("b",{staticClass:"label"},[t._v("完成时限：")]),t._v(t._s(e.timeLimit)+"\n        "),a("b",{staticClass:"label"},[t._v("开票回款风险：")]),a("span",{class:{redText:1===e.isRisk}},[t._v(t._s(e.riskSituation))]),a("br"),t._v(" "),a("b",{staticClass:"label"},[t._v("备注：")]),t._v(t._s(e.remark)+"\n      ")])],1)}))],1)},u=[],m={render:p,staticRenderFns:u},f=m,h=a("C7Lr"),v=r,g=h(d,f,!1,v,"data-v-8f50d8e2",null);e.default=g.exports},t4A7:function(t,e){}});